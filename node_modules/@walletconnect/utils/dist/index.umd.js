(function(E,Se){typeof exports=="object"&&typeof module<"u"?Se(exports):typeof define=="function"&&define.amd?define(["exports"],Se):(E=typeof globalThis<"u"?globalThis:E||self,Se(E["@walletconnect/utils"]={}))})(this,function(E){"use strict";const Se=":";function er(e){const[t,r]=e.split(Se);return{namespace:t,reference:r}}function tr(e){const{namespace:t,reference:r}=e;return[t,r].join(Se)}function Dt(e){const[t,r,i]=e.split(Se);return{namespace:t,reference:r,address:i}}function rr(e){const{namespace:t,reference:r,address:i}=e;return[t,r,i].join(Se)}function bt(e,t){const r=[];return e.forEach(i=>{const a=t(i);r.includes(a)||r.push(a)}),r}function nr(e){const{address:t}=Dt(e);return t}function ir(e){const{namespace:t,reference:r}=Dt(e);return tr({namespace:t,reference:r})}function Qn(e,t){const{namespace:r,reference:i}=er(t);return rr({namespace:r,reference:i,address:e})}function Zn(e){return bt(e,nr)}function ar(e){return bt(e,ir)}function ei(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...a.accounts)}),r}function ti(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...ar(a.accounts))}),r}function ri(e,t=[]){const r=[];return Object.keys(e).forEach(i=>{if(t.length&&!t.includes(i))return;const a=e[i];r.push(...Xe(i,a))}),r}function Xe(e,t){return e.includes(":")?[e]:t.chains||[]}const Je=e=>e?.split(":"),or=e=>{const t=e&&Je(e);if(t)return t[3]},ni=e=>{const t=e&&Je(e);if(t)return t[2]+":"+t[3]},sr=e=>{const t=e&&Je(e);if(t)return t.pop()},ii=(e,t)=>{const r=`${e.domain} wants you to sign in with your Ethereum account:`,i=sr(t),a=e.statement,u=`URI: ${e.aud}`,b=`Version: ${e.version}`,s=`Chain ID: ${or(t)}`,d=`Nonce: ${e.nonce}`,l=`Issued At: ${e.iat}`,D=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(y=>`- ${y}`).join(`
`)}`:void 0;return[r,i,"",a,"",u,b,s,d,l,D].filter(y=>y!=null).join(`
`)};function ur(e){var t=e.default;if(typeof t=="function"){var r=function(){return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(r,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}),r}var Et={},Qe={},F={},cr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});function t(s,d){var l=s>>>16&65535,D=s&65535,y=d>>>16&65535,m=d&65535;return D*m+(l*m+D*y<<16>>>0)|0}e.mul=Math.imul||t;function r(s,d){return s+d|0}e.add=r;function i(s,d){return s-d|0}e.sub=i;function a(s,d){return s<<d|s>>>32-d}e.rotl=a;function u(s,d){return s<<32-d|s>>>d}e.rotr=u;function b(s){return typeof s=="number"&&isFinite(s)&&Math.floor(s)===s}e.isInteger=Number.isInteger||b,e.MAX_SAFE_INTEGER=9007199254740991,e.isSafeInteger=function(s){return e.isInteger(s)&&s>=-e.MAX_SAFE_INTEGER&&s<=e.MAX_SAFE_INTEGER}})(cr),Object.defineProperty(F,"__esModule",{value:!0});var fr=cr;function ai(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])<<16>>16}F.readInt16BE=ai;function oi(e,t){return t===void 0&&(t=0),(e[t+0]<<8|e[t+1])>>>0}F.readUint16BE=oi;function si(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])<<16>>16}F.readInt16LE=si;function ui(e,t){return t===void 0&&(t=0),(e[t+1]<<8|e[t])>>>0}F.readUint16LE=ui;function hr(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>8,t[r+1]=e>>>0,t}F.writeUint16BE=hr,F.writeInt16BE=hr;function lr(e,t,r){return t===void 0&&(t=new Uint8Array(2)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t}F.writeUint16LE=lr,F.writeInt16LE=lr;function vt(e,t){return t===void 0&&(t=0),e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]}F.readInt32BE=vt;function yt(e,t){return t===void 0&&(t=0),(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}F.readUint32BE=yt;function gt(e,t){return t===void 0&&(t=0),e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]}F.readInt32LE=gt;function mt(e,t){return t===void 0&&(t=0),(e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t])>>>0}F.readUint32LE=mt;function Ze(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>24,t[r+1]=e>>>16,t[r+2]=e>>>8,t[r+3]=e>>>0,t}F.writeUint32BE=Ze,F.writeInt32BE=Ze;function et(e,t,r){return t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0),t[r+0]=e>>>0,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24,t}F.writeUint32LE=et,F.writeInt32LE=et;function ci(e,t){t===void 0&&(t=0);var r=vt(e,t),i=vt(e,t+4);return r*4294967296+i-(i>>31)*4294967296}F.readInt64BE=ci;function fi(e,t){t===void 0&&(t=0);var r=yt(e,t),i=yt(e,t+4);return r*4294967296+i}F.readUint64BE=fi;function hi(e,t){t===void 0&&(t=0);var r=gt(e,t),i=gt(e,t+4);return i*4294967296+r-(r>>31)*4294967296}F.readInt64LE=hi;function li(e,t){t===void 0&&(t=0);var r=mt(e,t),i=mt(e,t+4);return i*4294967296+r}F.readUint64LE=li;function dr(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),Ze(e/4294967296>>>0,t,r),Ze(e>>>0,t,r+4),t}F.writeUint64BE=dr,F.writeInt64BE=dr;function _r(e,t,r){return t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0),et(e>>>0,t,r),et(e/4294967296>>>0,t,r+4),t}F.writeUint64LE=_r,F.writeInt64LE=_r;function di(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintBE: array is too short for the given bitLength");for(var i=0,a=1,u=e/8+r-1;u>=r;u--)i+=t[u]*a,a*=256;return i}F.readUintBE=di;function _i(e,t,r){if(r===void 0&&(r=0),e%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(e/8>t.length-r)throw new Error("readUintLE: array is too short for the given bitLength");for(var i=0,a=1,u=r;u<r+e/8;u++)i+=t[u]*a,a*=256;return i}F.readUintLE=_i;function Di(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!fr.isSafeInteger(t))throw new Error("writeUintBE value must be an integer");for(var a=1,u=e/8+i-1;u>=i;u--)r[u]=t/a&255,a*=256;return r}F.writeUintBE=Di;function bi(e,t,r,i){if(r===void 0&&(r=new Uint8Array(e/8)),i===void 0&&(i=0),e%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!fr.isSafeInteger(t))throw new Error("writeUintLE value must be an integer");for(var a=1,u=i;u<i+e/8;u++)r[u]=t/a&255,a*=256;return r}F.writeUintLE=bi;function Ei(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t)}F.readFloat32BE=Ei;function vi(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat32(t,!0)}F.readFloat32LE=vi;function yi(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t)}F.readFloat64BE=yi;function gi(e,t){t===void 0&&(t=0);var r=new DataView(e.buffer,e.byteOffset,e.byteLength);return r.getFloat64(t,!0)}F.readFloat64LE=gi;function mi(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e),t}F.writeFloat32BE=mi;function wi(e,t,r){t===void 0&&(t=new Uint8Array(4)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat32(r,e,!0),t}F.writeFloat32LE=wi;function pi(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e),t}F.writeFloat64BE=pi;function Si(e,t,r){t===void 0&&(t=new Uint8Array(8)),r===void 0&&(r=0);var i=new DataView(t.buffer,t.byteOffset,t.byteLength);return i.setFloat64(r,e,!0),t}F.writeFloat64LE=Si;var ye={};Object.defineProperty(ye,"__esModule",{value:!0});function Oi(e){for(var t=0;t<e.length;t++)e[t]=0;return e}ye.wipe=Oi,Object.defineProperty(Qe,"__esModule",{value:!0});var ee=F,wt=ye,Ai=20;function Ci(e,t,r){for(var i=1634760805,a=857760878,u=2036477234,b=1797285236,s=r[3]<<24|r[2]<<16|r[1]<<8|r[0],d=r[7]<<24|r[6]<<16|r[5]<<8|r[4],l=r[11]<<24|r[10]<<16|r[9]<<8|r[8],D=r[15]<<24|r[14]<<16|r[13]<<8|r[12],y=r[19]<<24|r[18]<<16|r[17]<<8|r[16],m=r[23]<<24|r[22]<<16|r[21]<<8|r[20],g=r[27]<<24|r[26]<<16|r[25]<<8|r[24],w=r[31]<<24|r[30]<<16|r[29]<<8|r[28],O=t[3]<<24|t[2]<<16|t[1]<<8|t[0],p=t[7]<<24|t[6]<<16|t[5]<<8|t[4],U=t[11]<<24|t[10]<<16|t[9]<<8|t[8],_=t[15]<<24|t[14]<<16|t[13]<<8|t[12],v=i,c=a,f=u,h=b,n=s,o=d,S=l,C=D,T=y,M=m,L=g,j=w,R=O,P=p,A=U,I=_,x=0;x<Ai;x+=2)v=v+n|0,R^=v,R=R>>>32-16|R<<16,T=T+R|0,n^=T,n=n>>>32-12|n<<12,c=c+o|0,P^=c,P=P>>>32-16|P<<16,M=M+P|0,o^=M,o=o>>>32-12|o<<12,f=f+S|0,A^=f,A=A>>>32-16|A<<16,L=L+A|0,S^=L,S=S>>>32-12|S<<12,h=h+C|0,I^=h,I=I>>>32-16|I<<16,j=j+I|0,C^=j,C=C>>>32-12|C<<12,f=f+S|0,A^=f,A=A>>>32-8|A<<8,L=L+A|0,S^=L,S=S>>>32-7|S<<7,h=h+C|0,I^=h,I=I>>>32-8|I<<8,j=j+I|0,C^=j,C=C>>>32-7|C<<7,c=c+o|0,P^=c,P=P>>>32-8|P<<8,M=M+P|0,o^=M,o=o>>>32-7|o<<7,v=v+n|0,R^=v,R=R>>>32-8|R<<8,T=T+R|0,n^=T,n=n>>>32-7|n<<7,v=v+o|0,I^=v,I=I>>>32-16|I<<16,L=L+I|0,o^=L,o=o>>>32-12|o<<12,c=c+S|0,R^=c,R=R>>>32-16|R<<16,j=j+R|0,S^=j,S=S>>>32-12|S<<12,f=f+C|0,P^=f,P=P>>>32-16|P<<16,T=T+P|0,C^=T,C=C>>>32-12|C<<12,h=h+n|0,A^=h,A=A>>>32-16|A<<16,M=M+A|0,n^=M,n=n>>>32-12|n<<12,f=f+C|0,P^=f,P=P>>>32-8|P<<8,T=T+P|0,C^=T,C=C>>>32-7|C<<7,h=h+n|0,A^=h,A=A>>>32-8|A<<8,M=M+A|0,n^=M,n=n>>>32-7|n<<7,c=c+S|0,R^=c,R=R>>>32-8|R<<8,j=j+R|0,S^=j,S=S>>>32-7|S<<7,v=v+o|0,I^=v,I=I>>>32-8|I<<8,L=L+I|0,o^=L,o=o>>>32-7|o<<7;ee.writeUint32LE(v+i|0,e,0),ee.writeUint32LE(c+a|0,e,4),ee.writeUint32LE(f+u|0,e,8),ee.writeUint32LE(h+b|0,e,12),ee.writeUint32LE(n+s|0,e,16),ee.writeUint32LE(o+d|0,e,20),ee.writeUint32LE(S+l|0,e,24),ee.writeUint32LE(C+D|0,e,28),ee.writeUint32LE(T+y|0,e,32),ee.writeUint32LE(M+m|0,e,36),ee.writeUint32LE(L+g|0,e,40),ee.writeUint32LE(j+w|0,e,44),ee.writeUint32LE(R+O|0,e,48),ee.writeUint32LE(P+p|0,e,52),ee.writeUint32LE(A+U|0,e,56),ee.writeUint32LE(I+_|0,e,60)}function Dr(e,t,r,i,a){if(a===void 0&&(a=0),e.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(i.length<r.length)throw new Error("ChaCha: destination is shorter than source");var u,b;if(a===0){if(t.length!==8&&t.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");u=new Uint8Array(16),b=u.length-t.length,u.set(t,b)}else{if(t.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");u=t,b=a}for(var s=new Uint8Array(64),d=0;d<r.length;d+=64){Ci(s,u,e);for(var l=d;l<d+64&&l<r.length;l++)i[l]=r[l]^s[l-d];Ui(u,0,b)}return wt.wipe(s),a===0&&wt.wipe(u),i}Qe.streamXOR=Dr;function Ni(e,t,r,i){return i===void 0&&(i=0),wt.wipe(r),Dr(e,t,r,r,i)}Qe.stream=Ni;function Ui(e,t,r){for(var i=1;r--;)i=i+(e[t]&255)|0,e[t]=i&255,i>>>=8,t++;if(i>0)throw new Error("ChaCha: counter overflow")}var br={},Oe={};Object.defineProperty(Oe,"__esModule",{value:!0});function Ti(e,t,r){return~(e-1)&t|e-1&r}Oe.select=Ti;function Ii(e,t){return(e|0)-(t|0)-1>>>31&1}Oe.lessOrEqual=Ii;function Er(e,t){if(e.length!==t.length)return 0;for(var r=0,i=0;i<e.length;i++)r|=e[i]^t[i];return 1&r-1>>>8}Oe.compare=Er;function Ri(e,t){return e.length===0||t.length===0?!1:Er(e,t)!==0}Oe.equal=Ri,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Oe,r=ye;e.DIGEST_LENGTH=16;var i=function(){function b(s){this.digestLength=e.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var d=s[0]|s[1]<<8;this._r[0]=d&8191;var l=s[2]|s[3]<<8;this._r[1]=(d>>>13|l<<3)&8191;var D=s[4]|s[5]<<8;this._r[2]=(l>>>10|D<<6)&7939;var y=s[6]|s[7]<<8;this._r[3]=(D>>>7|y<<9)&8191;var m=s[8]|s[9]<<8;this._r[4]=(y>>>4|m<<12)&255,this._r[5]=m>>>1&8190;var g=s[10]|s[11]<<8;this._r[6]=(m>>>14|g<<2)&8191;var w=s[12]|s[13]<<8;this._r[7]=(g>>>11|w<<5)&8065;var O=s[14]|s[15]<<8;this._r[8]=(w>>>8|O<<8)&8191,this._r[9]=O>>>5&127,this._pad[0]=s[16]|s[17]<<8,this._pad[1]=s[18]|s[19]<<8,this._pad[2]=s[20]|s[21]<<8,this._pad[3]=s[22]|s[23]<<8,this._pad[4]=s[24]|s[25]<<8,this._pad[5]=s[26]|s[27]<<8,this._pad[6]=s[28]|s[29]<<8,this._pad[7]=s[30]|s[31]<<8}return b.prototype._blocks=function(s,d,l){for(var D=this._fin?0:2048,y=this._h[0],m=this._h[1],g=this._h[2],w=this._h[3],O=this._h[4],p=this._h[5],U=this._h[6],_=this._h[7],v=this._h[8],c=this._h[9],f=this._r[0],h=this._r[1],n=this._r[2],o=this._r[3],S=this._r[4],C=this._r[5],T=this._r[6],M=this._r[7],L=this._r[8],j=this._r[9];l>=16;){var R=s[d+0]|s[d+1]<<8;y+=R&8191;var P=s[d+2]|s[d+3]<<8;m+=(R>>>13|P<<3)&8191;var A=s[d+4]|s[d+5]<<8;g+=(P>>>10|A<<6)&8191;var I=s[d+6]|s[d+7]<<8;w+=(A>>>7|I<<9)&8191;var x=s[d+8]|s[d+9]<<8;O+=(I>>>4|x<<12)&8191,p+=x>>>1&8191;var Q=s[d+10]|s[d+11]<<8;U+=(x>>>14|Q<<2)&8191;var J=s[d+12]|s[d+13]<<8;_+=(Q>>>11|J<<5)&8191;var X=s[d+14]|s[d+15]<<8;v+=(J>>>8|X<<8)&8191,c+=X>>>5|D;var N=0,B=N;B+=y*f,B+=m*(5*j),B+=g*(5*L),B+=w*(5*M),B+=O*(5*T),N=B>>>13,B&=8191,B+=p*(5*C),B+=U*(5*S),B+=_*(5*o),B+=v*(5*n),B+=c*(5*h),N+=B>>>13,B&=8191;var $=N;$+=y*h,$+=m*f,$+=g*(5*j),$+=w*(5*L),$+=O*(5*M),N=$>>>13,$&=8191,$+=p*(5*T),$+=U*(5*C),$+=_*(5*S),$+=v*(5*o),$+=c*(5*n),N+=$>>>13,$&=8191;var V=N;V+=y*n,V+=m*h,V+=g*f,V+=w*(5*j),V+=O*(5*L),N=V>>>13,V&=8191,V+=p*(5*M),V+=U*(5*T),V+=_*(5*C),V+=v*(5*S),V+=c*(5*o),N+=V>>>13,V&=8191;var H=N;H+=y*o,H+=m*n,H+=g*h,H+=w*f,H+=O*(5*j),N=H>>>13,H&=8191,H+=p*(5*L),H+=U*(5*M),H+=_*(5*T),H+=v*(5*C),H+=c*(5*S),N+=H>>>13,H&=8191;var K=N;K+=y*S,K+=m*o,K+=g*n,K+=w*h,K+=O*f,N=K>>>13,K&=8191,K+=p*(5*j),K+=U*(5*L),K+=_*(5*M),K+=v*(5*T),K+=c*(5*C),N+=K>>>13,K&=8191;var W=N;W+=y*C,W+=m*S,W+=g*o,W+=w*n,W+=O*h,N=W>>>13,W&=8191,W+=p*f,W+=U*(5*j),W+=_*(5*L),W+=v*(5*M),W+=c*(5*T),N+=W>>>13,W&=8191;var q=N;q+=y*T,q+=m*C,q+=g*S,q+=w*o,q+=O*n,N=q>>>13,q&=8191,q+=p*h,q+=U*f,q+=_*(5*j),q+=v*(5*L),q+=c*(5*M),N+=q>>>13,q&=8191;var Y=N;Y+=y*M,Y+=m*T,Y+=g*C,Y+=w*S,Y+=O*o,N=Y>>>13,Y&=8191,Y+=p*n,Y+=U*h,Y+=_*f,Y+=v*(5*j),Y+=c*(5*L),N+=Y>>>13,Y&=8191;var G=N;G+=y*L,G+=m*M,G+=g*T,G+=w*C,G+=O*S,N=G>>>13,G&=8191,G+=p*o,G+=U*n,G+=_*h,G+=v*f,G+=c*(5*j),N+=G>>>13,G&=8191;var k=N;k+=y*j,k+=m*L,k+=g*M,k+=w*T,k+=O*C,N=k>>>13,k&=8191,k+=p*S,k+=U*o,k+=_*n,k+=v*h,k+=c*f,N+=k>>>13,k&=8191,N=(N<<2)+N|0,N=N+B|0,B=N&8191,N=N>>>13,$+=N,y=B,m=$,g=V,w=H,O=K,p=W,U=q,_=Y,v=G,c=k,d+=16,l-=16}this._h[0]=y,this._h[1]=m,this._h[2]=g,this._h[3]=w,this._h[4]=O,this._h[5]=p,this._h[6]=U,this._h[7]=_,this._h[8]=v,this._h[9]=c},b.prototype.finish=function(s,d){d===void 0&&(d=0);var l=new Uint16Array(10),D,y,m,g;if(this._leftover){for(g=this._leftover,this._buffer[g++]=1;g<16;g++)this._buffer[g]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(D=this._h[1]>>>13,this._h[1]&=8191,g=2;g<10;g++)this._h[g]+=D,D=this._h[g]>>>13,this._h[g]&=8191;for(this._h[0]+=D*5,D=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=D,D=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=D,l[0]=this._h[0]+5,D=l[0]>>>13,l[0]&=8191,g=1;g<10;g++)l[g]=this._h[g]+D,D=l[g]>>>13,l[g]&=8191;for(l[9]-=1<<13,y=(D^1)-1,g=0;g<10;g++)l[g]&=y;for(y=~y,g=0;g<10;g++)this._h[g]=this._h[g]&y|l[g];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,m=this._h[0]+this._pad[0],this._h[0]=m&65535,g=1;g<8;g++)m=(this._h[g]+this._pad[g]|0)+(m>>>16)|0,this._h[g]=m&65535;return s[d+0]=this._h[0]>>>0,s[d+1]=this._h[0]>>>8,s[d+2]=this._h[1]>>>0,s[d+3]=this._h[1]>>>8,s[d+4]=this._h[2]>>>0,s[d+5]=this._h[2]>>>8,s[d+6]=this._h[3]>>>0,s[d+7]=this._h[3]>>>8,s[d+8]=this._h[4]>>>0,s[d+9]=this._h[4]>>>8,s[d+10]=this._h[5]>>>0,s[d+11]=this._h[5]>>>8,s[d+12]=this._h[6]>>>0,s[d+13]=this._h[6]>>>8,s[d+14]=this._h[7]>>>0,s[d+15]=this._h[7]>>>8,this._finished=!0,this},b.prototype.update=function(s){var d=0,l=s.length,D;if(this._leftover){D=16-this._leftover,D>l&&(D=l);for(var y=0;y<D;y++)this._buffer[this._leftover+y]=s[d+y];if(l-=D,d+=D,this._leftover+=D,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(l>=16&&(D=l-l%16,this._blocks(s,d,D),d+=D,l-=D),l){for(var y=0;y<l;y++)this._buffer[this._leftover+y]=s[d+y];this._leftover+=l}return this},b.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var s=new Uint8Array(16);return this.finish(s),s},b.prototype.clean=function(){return r.wipe(this._buffer),r.wipe(this._r),r.wipe(this._h),r.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},b}();e.Poly1305=i;function a(b,s){var d=new i(b);d.update(s);var l=d.digest();return d.clean(),l}e.oneTimeAuth=a;function u(b,s){return b.length!==e.DIGEST_LENGTH||s.length!==e.DIGEST_LENGTH?!1:t.equal(b,s)}e.equal=u}(br),function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=Qe,r=br,i=ye,a=F,u=Oe;e.KEY_LENGTH=32,e.NONCE_LENGTH=12,e.TAG_LENGTH=16;var b=new Uint8Array(16),s=function(){function d(l){if(this.nonceLength=e.NONCE_LENGTH,this.tagLength=e.TAG_LENGTH,l.length!==e.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return d.prototype.seal=function(l,D,y,m){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var g=new Uint8Array(16);g.set(l,g.length-l.length);var w=new Uint8Array(32);t.stream(this._key,g,w,4);var O=D.length+this.tagLength,p;if(m){if(m.length!==O)throw new Error("ChaCha20Poly1305: incorrect destination length");p=m}else p=new Uint8Array(O);return t.streamXOR(this._key,g,D,p,4),this._authenticate(p.subarray(p.length-this.tagLength,p.length),w,p.subarray(0,p.length-this.tagLength),y),i.wipe(g),p},d.prototype.open=function(l,D,y,m){if(l.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(D.length<this.tagLength)return null;var g=new Uint8Array(16);g.set(l,g.length-l.length);var w=new Uint8Array(32);t.stream(this._key,g,w,4);var O=new Uint8Array(this.tagLength);if(this._authenticate(O,w,D.subarray(0,D.length-this.tagLength),y),!u.equal(O,D.subarray(D.length-this.tagLength,D.length)))return null;var p=D.length-this.tagLength,U;if(m){if(m.length!==p)throw new Error("ChaCha20Poly1305: incorrect destination length");U=m}else U=new Uint8Array(p);return t.streamXOR(this._key,g,D.subarray(0,D.length-this.tagLength),U,4),i.wipe(g),U},d.prototype.clean=function(){return i.wipe(this._key),this},d.prototype._authenticate=function(l,D,y,m){var g=new r.Poly1305(D);m&&(g.update(m),m.length%16>0&&g.update(b.subarray(m.length%16))),g.update(y),y.length%16>0&&g.update(b.subarray(y.length%16));var w=new Uint8Array(8);m&&a.writeUint64LE(m.length,w),g.update(w),a.writeUint64LE(y.length,w),g.update(w);for(var O=g.digest(),p=0;p<O.length;p++)l[p]=O[p];g.clean(),i.wipe(O),i.wipe(w)},d}();e.ChaCha20Poly1305=s}(Et);var vr={},He={},pt={};Object.defineProperty(pt,"__esModule",{value:!0});function Pi(e){return typeof e.saveState<"u"&&typeof e.restoreState<"u"&&typeof e.cleanSavedState<"u"}pt.isSerializableHash=Pi,Object.defineProperty(He,"__esModule",{value:!0});var we=pt,Fi=Oe,Mi=ye,yr=function(){function e(t,r){this._finished=!1,this._inner=new t,this._outer=new t,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var i=new Uint8Array(this.blockSize);r.length>this.blockSize?this._inner.update(r).finish(i).clean():i.set(r);for(var a=0;a<i.length;a++)i[a]^=54;this._inner.update(i);for(var a=0;a<i.length;a++)i[a]^=106;this._outer.update(i),we.isSerializableHash(this._inner)&&we.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),Mi.wipe(i)}return e.prototype.reset=function(){if(!we.isSerializableHash(this._inner)||!we.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.clean=function(){we.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),we.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},e.prototype.update=function(t){return this._inner.update(t),this},e.prototype.finish=function(t){return this._finished?(this._outer.finish(t),this):(this._inner.finish(t),this._outer.update(t.subarray(0,this.digestLength)).finish(t),this._finished=!0,this)},e.prototype.digest=function(){var t=new Uint8Array(this.digestLength);return this.finish(t),t},e.prototype.saveState=function(){if(!we.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},e.prototype.restoreState=function(t){if(!we.isSerializableHash(this._inner)||!we.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(t),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},e.prototype.cleanSavedState=function(t){if(!we.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(t)},e}();He.HMAC=yr;function ji(e,t,r){var i=new yr(e,t);i.update(r);var a=i.digest();return i.clean(),a}He.hmac=ji,He.equal=Fi.equal,Object.defineProperty(vr,"__esModule",{value:!0});var gr=He,mr=ye,Li=function(){function e(t,r,i,a){i===void 0&&(i=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=t,this._info=a;var u=gr.hmac(this._hash,i,r);this._hmac=new gr.HMAC(t,u),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return e.prototype._fillBuffer=function(){this._counter[0]++;var t=this._counter[0];if(t===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),t>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},e.prototype.expand=function(t){for(var r=new Uint8Array(t),i=0;i<r.length;i++)this._bufpos===this._buffer.length&&this._fillBuffer(),r[i]=this._buffer[this._bufpos++];return r},e.prototype.clean=function(){this._hmac.clean(),mr.wipe(this._buffer),mr.wipe(this._counter),this._bufpos=0},e}(),Bi=vr.HKDF=Li,tt={},rt={},nt={};Object.defineProperty(nt,"__esModule",{value:!0}),nt.BrowserRandomSource=void 0;const wr=65536;class $i{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const t=typeof self<"u"?self.crypto||self.msCrypto:null;t&&t.getRandomValues!==void 0&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const r=new Uint8Array(t);for(let i=0;i<r.length;i+=wr)this._crypto.getRandomValues(r.subarray(i,i+Math.min(r.length-i,wr)));return r}}nt.BrowserRandomSource=$i;function Vi(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var it={},Hi={},Ki=Object.freeze({__proto__:null,default:Hi}),Wi=ur(Ki);Object.defineProperty(it,"__esModule",{value:!0}),it.NodeRandomSource=void 0;const qi=ye;class zi{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof Vi<"u"){const t=Wi;t&&t.randomBytes&&(this._crypto=t,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(t){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let r=this._crypto.randomBytes(t);if(r.length!==t)throw new Error("NodeRandomSource: got fewer bytes than requested");const i=new Uint8Array(t);for(let a=0;a<i.length;a++)i[a]=r[a];return(0,qi.wipe)(r),i}}it.NodeRandomSource=zi,Object.defineProperty(rt,"__esModule",{value:!0}),rt.SystemRandomSource=void 0;const Yi=nt,Gi=it;class xi{constructor(){if(this.isAvailable=!1,this.name="",this._source=new Yi.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new Gi.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(t){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(t)}}rt.SystemRandomSource=xi,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.randomStringForEntropy=e.randomString=e.randomUint32=e.randomBytes=e.defaultRandomSource=void 0;const t=rt,r=F,i=ye;e.defaultRandomSource=new t.SystemRandomSource;function a(l,D=e.defaultRandomSource){return D.randomBytes(l)}e.randomBytes=a;function u(l=e.defaultRandomSource){const D=a(4,l),y=(0,r.readUint32LE)(D);return(0,i.wipe)(D),y}e.randomUint32=u;const b="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function s(l,D=b,y=e.defaultRandomSource){if(D.length<2)throw new Error("randomString charset is too short");if(D.length>256)throw new Error("randomString charset is too long");let m="";const g=D.length,w=256-256%g;for(;l>0;){const O=a(Math.ceil(l*256/w),y);for(let p=0;p<O.length&&l>0;p++){const U=O[p];U<w&&(m+=D.charAt(U%g),l--)}(0,i.wipe)(O)}return m}e.randomString=s;function d(l,D=b,y=e.defaultRandomSource){const m=Math.ceil(l/(Math.log(D.length)/Math.LN2));return s(m,D,y)}e.randomStringForEntropy=d}(tt);var at={};(function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=F,r=ye;e.DIGEST_LENGTH=32,e.BLOCK_SIZE=64;var i=function(){function s(){this.digestLength=e.DIGEST_LENGTH,this.blockSize=e.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return s.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},s.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},s.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._temp),this.reset()},s.prototype.update=function(d,l){if(l===void 0&&(l=d.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var D=0;if(this._bytesHashed+=l,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&l>0;)this._buffer[this._bufferLength++]=d[D++],l--;this._bufferLength===this.blockSize&&(u(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(l>=this.blockSize&&(D=u(this._temp,this._state,d,D,l),l%=this.blockSize);l>0;)this._buffer[this._bufferLength++]=d[D++],l--;return this},s.prototype.finish=function(d){if(!this._finished){var l=this._bytesHashed,D=this._bufferLength,y=l/536870912|0,m=l<<3,g=l%64<56?64:128;this._buffer[D]=128;for(var w=D+1;w<g-8;w++)this._buffer[w]=0;t.writeUint32BE(y,this._buffer,g-8),t.writeUint32BE(m,this._buffer,g-4),u(this._temp,this._state,this._buffer,0,g),this._finished=!0}for(var w=0;w<this.digestLength/4;w++)t.writeUint32BE(this._state[w],d,w*4);return this},s.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},s.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},s.prototype.restoreState=function(d){return this._state.set(d.state),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},s.prototype.cleanSavedState=function(d){r.wipe(d.state),d.buffer&&r.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},s}();e.SHA256=i;var a=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function u(s,d,l,D,y){for(;y>=64;){for(var m=d[0],g=d[1],w=d[2],O=d[3],p=d[4],U=d[5],_=d[6],v=d[7],c=0;c<16;c++){var f=D+c*4;s[c]=t.readUint32BE(l,f)}for(var c=16;c<64;c++){var h=s[c-2],n=(h>>>17|h<<32-17)^(h>>>19|h<<32-19)^h>>>10;h=s[c-15];var o=(h>>>7|h<<32-7)^(h>>>18|h<<32-18)^h>>>3;s[c]=(n+s[c-7]|0)+(o+s[c-16]|0)}for(var c=0;c<64;c++){var n=(((p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&U^~p&_)|0)+(v+(a[c]+s[c]|0)|0)|0,o=((m>>>2|m<<32-2)^(m>>>13|m<<32-13)^(m>>>22|m<<32-22))+(m&g^m&w^g&w)|0;v=_,_=U,U=p,p=O+n|0,O=w,w=g,g=m,m=n+o|0}d[0]+=m,d[1]+=g,d[2]+=w,d[3]+=O,d[4]+=p,d[5]+=U,d[6]+=_,d[7]+=v,D+=64,y-=64}return D}function b(s){var d=new i;d.update(s);var l=d.digest();return d.clean(),l}e.hash=b})(at);var St={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sharedKey=e.generateKeyPair=e.generateKeyPairFromSeed=e.scalarMultBase=e.scalarMult=e.SHARED_KEY_LENGTH=e.SECRET_KEY_LENGTH=e.PUBLIC_KEY_LENGTH=void 0;const t=tt,r=ye;e.PUBLIC_KEY_LENGTH=32,e.SECRET_KEY_LENGTH=32,e.SHARED_KEY_LENGTH=32;function i(c){const f=new Float64Array(16);if(c)for(let h=0;h<c.length;h++)f[h]=c[h];return f}const a=new Uint8Array(32);a[0]=9;const u=i([56129,1]);function b(c){let f=1;for(let h=0;h<16;h++){let n=c[h]+f+65535;f=Math.floor(n/65536),c[h]=n-f*65536}c[0]+=f-1+37*(f-1)}function s(c,f,h){const n=~(h-1);for(let o=0;o<16;o++){const S=n&(c[o]^f[o]);c[o]^=S,f[o]^=S}}function d(c,f){const h=i(),n=i();for(let o=0;o<16;o++)n[o]=f[o];b(n),b(n),b(n);for(let o=0;o<2;o++){h[0]=n[0]-65517;for(let C=1;C<15;C++)h[C]=n[C]-65535-(h[C-1]>>16&1),h[C-1]&=65535;h[15]=n[15]-32767-(h[14]>>16&1);const S=h[15]>>16&1;h[14]&=65535,s(n,h,1-S)}for(let o=0;o<16;o++)c[2*o]=n[o]&255,c[2*o+1]=n[o]>>8}function l(c,f){for(let h=0;h<16;h++)c[h]=f[2*h]+(f[2*h+1]<<8);c[15]&=32767}function D(c,f,h){for(let n=0;n<16;n++)c[n]=f[n]+h[n]}function y(c,f,h){for(let n=0;n<16;n++)c[n]=f[n]-h[n]}function m(c,f,h){let n,o,S=0,C=0,T=0,M=0,L=0,j=0,R=0,P=0,A=0,I=0,x=0,Q=0,J=0,X=0,N=0,B=0,$=0,V=0,H=0,K=0,W=0,q=0,Y=0,G=0,k=0,Me=0,Ve=0,ke=0,_t=0,Zt=0,Jn=0,te=h[0],re=h[1],ne=h[2],ie=h[3],ae=h[4],oe=h[5],se=h[6],ue=h[7],ce=h[8],fe=h[9],he=h[10],le=h[11],de=h[12],_e=h[13],De=h[14],be=h[15];n=f[0],S+=n*te,C+=n*re,T+=n*ne,M+=n*ie,L+=n*ae,j+=n*oe,R+=n*se,P+=n*ue,A+=n*ce,I+=n*fe,x+=n*he,Q+=n*le,J+=n*de,X+=n*_e,N+=n*De,B+=n*be,n=f[1],C+=n*te,T+=n*re,M+=n*ne,L+=n*ie,j+=n*ae,R+=n*oe,P+=n*se,A+=n*ue,I+=n*ce,x+=n*fe,Q+=n*he,J+=n*le,X+=n*de,N+=n*_e,B+=n*De,$+=n*be,n=f[2],T+=n*te,M+=n*re,L+=n*ne,j+=n*ie,R+=n*ae,P+=n*oe,A+=n*se,I+=n*ue,x+=n*ce,Q+=n*fe,J+=n*he,X+=n*le,N+=n*de,B+=n*_e,$+=n*De,V+=n*be,n=f[3],M+=n*te,L+=n*re,j+=n*ne,R+=n*ie,P+=n*ae,A+=n*oe,I+=n*se,x+=n*ue,Q+=n*ce,J+=n*fe,X+=n*he,N+=n*le,B+=n*de,$+=n*_e,V+=n*De,H+=n*be,n=f[4],L+=n*te,j+=n*re,R+=n*ne,P+=n*ie,A+=n*ae,I+=n*oe,x+=n*se,Q+=n*ue,J+=n*ce,X+=n*fe,N+=n*he,B+=n*le,$+=n*de,V+=n*_e,H+=n*De,K+=n*be,n=f[5],j+=n*te,R+=n*re,P+=n*ne,A+=n*ie,I+=n*ae,x+=n*oe,Q+=n*se,J+=n*ue,X+=n*ce,N+=n*fe,B+=n*he,$+=n*le,V+=n*de,H+=n*_e,K+=n*De,W+=n*be,n=f[6],R+=n*te,P+=n*re,A+=n*ne,I+=n*ie,x+=n*ae,Q+=n*oe,J+=n*se,X+=n*ue,N+=n*ce,B+=n*fe,$+=n*he,V+=n*le,H+=n*de,K+=n*_e,W+=n*De,q+=n*be,n=f[7],P+=n*te,A+=n*re,I+=n*ne,x+=n*ie,Q+=n*ae,J+=n*oe,X+=n*se,N+=n*ue,B+=n*ce,$+=n*fe,V+=n*he,H+=n*le,K+=n*de,W+=n*_e,q+=n*De,Y+=n*be,n=f[8],A+=n*te,I+=n*re,x+=n*ne,Q+=n*ie,J+=n*ae,X+=n*oe,N+=n*se,B+=n*ue,$+=n*ce,V+=n*fe,H+=n*he,K+=n*le,W+=n*de,q+=n*_e,Y+=n*De,G+=n*be,n=f[9],I+=n*te,x+=n*re,Q+=n*ne,J+=n*ie,X+=n*ae,N+=n*oe,B+=n*se,$+=n*ue,V+=n*ce,H+=n*fe,K+=n*he,W+=n*le,q+=n*de,Y+=n*_e,G+=n*De,k+=n*be,n=f[10],x+=n*te,Q+=n*re,J+=n*ne,X+=n*ie,N+=n*ae,B+=n*oe,$+=n*se,V+=n*ue,H+=n*ce,K+=n*fe,W+=n*he,q+=n*le,Y+=n*de,G+=n*_e,k+=n*De,Me+=n*be,n=f[11],Q+=n*te,J+=n*re,X+=n*ne,N+=n*ie,B+=n*ae,$+=n*oe,V+=n*se,H+=n*ue,K+=n*ce,W+=n*fe,q+=n*he,Y+=n*le,G+=n*de,k+=n*_e,Me+=n*De,Ve+=n*be,n=f[12],J+=n*te,X+=n*re,N+=n*ne,B+=n*ie,$+=n*ae,V+=n*oe,H+=n*se,K+=n*ue,W+=n*ce,q+=n*fe,Y+=n*he,G+=n*le,k+=n*de,Me+=n*_e,Ve+=n*De,ke+=n*be,n=f[13],X+=n*te,N+=n*re,B+=n*ne,$+=n*ie,V+=n*ae,H+=n*oe,K+=n*se,W+=n*ue,q+=n*ce,Y+=n*fe,G+=n*he,k+=n*le,Me+=n*de,Ve+=n*_e,ke+=n*De,_t+=n*be,n=f[14],N+=n*te,B+=n*re,$+=n*ne,V+=n*ie,H+=n*ae,K+=n*oe,W+=n*se,q+=n*ue,Y+=n*ce,G+=n*fe,k+=n*he,Me+=n*le,Ve+=n*de,ke+=n*_e,_t+=n*De,Zt+=n*be,n=f[15],B+=n*te,$+=n*re,V+=n*ne,H+=n*ie,K+=n*ae,W+=n*oe,q+=n*se,Y+=n*ue,G+=n*ce,k+=n*fe,Me+=n*he,Ve+=n*le,ke+=n*de,_t+=n*_e,Zt+=n*De,Jn+=n*be,S+=38*$,C+=38*V,T+=38*H,M+=38*K,L+=38*W,j+=38*q,R+=38*Y,P+=38*G,A+=38*k,I+=38*Me,x+=38*Ve,Q+=38*ke,J+=38*_t,X+=38*Zt,N+=38*Jn,o=1,n=S+o+65535,o=Math.floor(n/65536),S=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=M+o+65535,o=Math.floor(n/65536),M=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=P+o+65535,o=Math.floor(n/65536),P=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=x+o+65535,o=Math.floor(n/65536),x=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=X+o+65535,o=Math.floor(n/65536),X=n-o*65536,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,S+=o-1+37*(o-1),o=1,n=S+o+65535,o=Math.floor(n/65536),S=n-o*65536,n=C+o+65535,o=Math.floor(n/65536),C=n-o*65536,n=T+o+65535,o=Math.floor(n/65536),T=n-o*65536,n=M+o+65535,o=Math.floor(n/65536),M=n-o*65536,n=L+o+65535,o=Math.floor(n/65536),L=n-o*65536,n=j+o+65535,o=Math.floor(n/65536),j=n-o*65536,n=R+o+65535,o=Math.floor(n/65536),R=n-o*65536,n=P+o+65535,o=Math.floor(n/65536),P=n-o*65536,n=A+o+65535,o=Math.floor(n/65536),A=n-o*65536,n=I+o+65535,o=Math.floor(n/65536),I=n-o*65536,n=x+o+65535,o=Math.floor(n/65536),x=n-o*65536,n=Q+o+65535,o=Math.floor(n/65536),Q=n-o*65536,n=J+o+65535,o=Math.floor(n/65536),J=n-o*65536,n=X+o+65535,o=Math.floor(n/65536),X=n-o*65536,n=N+o+65535,o=Math.floor(n/65536),N=n-o*65536,n=B+o+65535,o=Math.floor(n/65536),B=n-o*65536,S+=o-1+37*(o-1),c[0]=S,c[1]=C,c[2]=T,c[3]=M,c[4]=L,c[5]=j,c[6]=R,c[7]=P,c[8]=A,c[9]=I,c[10]=x,c[11]=Q,c[12]=J,c[13]=X,c[14]=N,c[15]=B}function g(c,f){m(c,f,f)}function w(c,f){const h=i();for(let n=0;n<16;n++)h[n]=f[n];for(let n=253;n>=0;n--)g(h,h),n!==2&&n!==4&&m(h,h,f);for(let n=0;n<16;n++)c[n]=h[n]}function O(c,f){const h=new Uint8Array(32),n=new Float64Array(80),o=i(),S=i(),C=i(),T=i(),M=i(),L=i();for(let A=0;A<31;A++)h[A]=c[A];h[31]=c[31]&127|64,h[0]&=248,l(n,f);for(let A=0;A<16;A++)S[A]=n[A];o[0]=T[0]=1;for(let A=254;A>=0;--A){const I=h[A>>>3]>>>(A&7)&1;s(o,S,I),s(C,T,I),D(M,o,C),y(o,o,C),D(C,S,T),y(S,S,T),g(T,M),g(L,o),m(o,C,o),m(C,S,M),D(M,o,C),y(o,o,C),g(S,o),y(C,T,L),m(o,C,u),D(o,o,T),m(C,C,o),m(o,T,L),m(T,S,n),g(S,M),s(o,S,I),s(C,T,I)}for(let A=0;A<16;A++)n[A+16]=o[A],n[A+32]=C[A],n[A+48]=S[A],n[A+64]=T[A];const j=n.subarray(32),R=n.subarray(16);w(j,j),m(R,R,j);const P=new Uint8Array(32);return d(P,R),P}e.scalarMult=O;function p(c){return O(c,a)}e.scalarMultBase=p;function U(c){if(c.length!==e.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${e.SECRET_KEY_LENGTH} bytes`);const f=new Uint8Array(c);return{publicKey:p(f),secretKey:f}}e.generateKeyPairFromSeed=U;function _(c){const f=(0,t.randomBytes)(32,c),h=U(f);return(0,r.wipe)(f),h}e.generateKeyPair=_;function v(c,f,h=!1){if(c.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(f.length!==e.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const n=O(c,f);if(h){let o=0;for(let S=0;S<n.length;S++)o|=n[S];if(o===0)throw new Error("X25519: invalid shared key")}return n}e.sharedKey=v})(St);function Ot(e){return globalThis.Buffer!=null?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function pr(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ot(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function Sr(e,t){t||(t=e.reduce((a,u)=>a+u.length,0));const r=pr(t);let i=0;for(const a of e)r.set(a,i),i+=a.length;return Ot(r)}function ki(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),i=0;i<r.length;i++)r[i]=255;for(var a=0;a<e.length;a++){var u=e.charAt(a),b=u.charCodeAt(0);if(r[b]!==255)throw new TypeError(u+" is ambiguous");r[b]=a}var s=e.length,d=e.charAt(0),l=Math.log(s)/Math.log(256),D=Math.log(256)/Math.log(s);function y(w){if(w instanceof Uint8Array||(ArrayBuffer.isView(w)?w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength):Array.isArray(w)&&(w=Uint8Array.from(w))),!(w instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(w.length===0)return"";for(var O=0,p=0,U=0,_=w.length;U!==_&&w[U]===0;)U++,O++;for(var v=(_-U)*D+1>>>0,c=new Uint8Array(v);U!==_;){for(var f=w[U],h=0,n=v-1;(f!==0||h<p)&&n!==-1;n--,h++)f+=256*c[n]>>>0,c[n]=f%s>>>0,f=f/s>>>0;if(f!==0)throw new Error("Non-zero carry");p=h,U++}for(var o=v-p;o!==v&&c[o]===0;)o++;for(var S=d.repeat(O);o<v;++o)S+=e.charAt(c[o]);return S}function m(w){if(typeof w!="string")throw new TypeError("Expected String");if(w.length===0)return new Uint8Array;var O=0;if(w[O]!==" "){for(var p=0,U=0;w[O]===d;)p++,O++;for(var _=(w.length-O)*l+1>>>0,v=new Uint8Array(_);w[O];){var c=r[w.charCodeAt(O)];if(c===255)return;for(var f=0,h=_-1;(c!==0||f<U)&&h!==-1;h--,f++)c+=s*v[h]>>>0,v[h]=c%256>>>0,c=c/256>>>0;if(c!==0)throw new Error("Non-zero carry");U=f,O++}if(w[O]!==" "){for(var n=_-U;n!==_&&v[n]===0;)n++;for(var o=new Uint8Array(p+(_-n)),S=p;n!==_;)o[S++]=v[n++];return o}}}function g(w){var O=m(w);if(O)return O;throw new Error(`Non-${t} character`)}return{encode:y,decodeUnsafe:m,decode:g}}var Xi=ki,Ji=Xi;const Or=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},Qi=e=>new TextEncoder().encode(e),Zi=e=>new TextDecoder().decode(e);class ea{constructor(t,r,i){this.name=t,this.prefix=r,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class ta{constructor(t,r,i){if(this.name=t,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Ar(this,t)}}class ra{constructor(t){this.decoders=t}or(t){return Ar(this,t)}decode(t){const r=t[0],i=this.decoders[r];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Ar=(e,t)=>new ra({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class na{constructor(t,r,i,a){this.name=t,this.prefix=r,this.baseEncode=i,this.baseDecode=a,this.encoder=new ea(t,r,i),this.decoder=new ta(t,r,a)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const ot=({name:e,prefix:t,encode:r,decode:i})=>new na(e,t,r,i),Ke=({prefix:e,name:t,alphabet:r})=>{const{encode:i,decode:a}=Ji(r,t);return ot({prefix:e,name:t,encode:i,decode:u=>Or(a(u))})},ia=(e,t,r,i)=>{const a={};for(let D=0;D<t.length;++D)a[t[D]]=D;let u=e.length;for(;e[u-1]==="=";)--u;const b=new Uint8Array(u*r/8|0);let s=0,d=0,l=0;for(let D=0;D<u;++D){const y=a[e[D]];if(y===void 0)throw new SyntaxError(`Non-${i} character`);d=d<<r|y,s+=r,s>=8&&(s-=8,b[l++]=255&d>>s)}if(s>=r||255&d<<8-s)throw new SyntaxError("Unexpected end of data");return b},aa=(e,t,r)=>{const i=t[t.length-1]==="=",a=(1<<r)-1;let u="",b=0,s=0;for(let d=0;d<e.length;++d)for(s=s<<8|e[d],b+=8;b>r;)b-=r,u+=t[a&s>>b];if(b&&(u+=t[a&s<<r-b]),i)for(;u.length*r&7;)u+="=";return u},Z=({name:e,prefix:t,bitsPerChar:r,alphabet:i})=>ot({prefix:t,name:e,encode(a){return aa(a,i,r)},decode(a){return ia(a,i,r,e)}}),oa=ot({prefix:"\0",name:"identity",encode:e=>Zi(e),decode:e=>Qi(e)});var sa=Object.freeze({__proto__:null,identity:oa});const ua=Z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var ca=Object.freeze({__proto__:null,base2:ua});const fa=Z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var ha=Object.freeze({__proto__:null,base8:fa});const la=Ke({prefix:"9",name:"base10",alphabet:"0123456789"});var da=Object.freeze({__proto__:null,base10:la});const _a=Z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Da=Z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ba=Object.freeze({__proto__:null,base16:_a,base16upper:Da});const Ea=Z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),va=Z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ya=Z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ga=Z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ma=Z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),wa=Z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),pa=Z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Sa=Z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Oa=Z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Aa=Object.freeze({__proto__:null,base32:Ea,base32upper:va,base32pad:ya,base32padupper:ga,base32hex:ma,base32hexupper:wa,base32hexpad:pa,base32hexpadupper:Sa,base32z:Oa});const Ca=Ke({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Na=Ke({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Ua=Object.freeze({__proto__:null,base36:Ca,base36upper:Na});const Ta=Ke({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Ia=Ke({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Ra=Object.freeze({__proto__:null,base58btc:Ta,base58flickr:Ia});const Pa=Z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Fa=Z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Ma=Z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ja=Z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var La=Object.freeze({__proto__:null,base64:Pa,base64pad:Fa,base64url:Ma,base64urlpad:ja});const Cr=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Ba=Cr.reduce((e,t,r)=>(e[r]=t,e),[]),$a=Cr.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]);function Va(e){return e.reduce((t,r)=>(t+=Ba[r],t),"")}function Ha(e){const t=[];for(const r of e){const i=$a[r.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${r}`);t.push(i)}return new Uint8Array(t)}const Ka=ot({prefix:"\u{1F680}",name:"base256emoji",encode:Va,decode:Ha});var Wa=Object.freeze({__proto__:null,base256emoji:Ka}),qa=Ur,Nr=128,za=127,Ya=~za,Ga=Math.pow(2,31);function Ur(e,t,r){t=t||[],r=r||0;for(var i=r;e>=Ga;)t[r++]=e&255|Nr,e/=128;for(;e&Ya;)t[r++]=e&255|Nr,e>>>=7;return t[r]=e|0,Ur.bytes=r-i+1,t}var xa=At,ka=128,Tr=127;function At(e,i){var r=0,i=i||0,a=0,u=i,b,s=e.length;do{if(u>=s)throw At.bytes=0,new RangeError("Could not decode varint");b=e[u++],r+=a<28?(b&Tr)<<a:(b&Tr)*Math.pow(2,a),a+=7}while(b>=ka);return At.bytes=u-i,r}var Xa=Math.pow(2,7),Ja=Math.pow(2,14),Qa=Math.pow(2,21),Za=Math.pow(2,28),eo=Math.pow(2,35),to=Math.pow(2,42),ro=Math.pow(2,49),no=Math.pow(2,56),io=Math.pow(2,63),ao=function(e){return e<Xa?1:e<Ja?2:e<Qa?3:e<Za?4:e<eo?5:e<to?6:e<ro?7:e<no?8:e<io?9:10},oo={encode:qa,decode:xa,encodingLength:ao},Ir=oo;const Rr=(e,t,r=0)=>(Ir.encode(e,t,r),t),Pr=e=>Ir.encodingLength(e),Ct=(e,t)=>{const r=t.byteLength,i=Pr(e),a=i+Pr(r),u=new Uint8Array(a+r);return Rr(e,u,0),Rr(r,u,i),u.set(t,a),new so(e,r,t,u)};class so{constructor(t,r,i,a){this.code=t,this.size=r,this.digest=i,this.bytes=a}}const Fr=({name:e,code:t,encode:r})=>new uo(e,t,r);class uo{constructor(t,r,i){this.name=t,this.code=r,this.encode=i}digest(t){if(t instanceof Uint8Array){const r=this.encode(t);return r instanceof Uint8Array?Ct(this.code,r):r.then(i=>Ct(this.code,i))}else throw Error("Unknown type, must be binary type")}}const Mr=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),co=Fr({name:"sha2-256",code:18,encode:Mr("SHA-256")}),fo=Fr({name:"sha2-512",code:19,encode:Mr("SHA-512")});var ho=Object.freeze({__proto__:null,sha256:co,sha512:fo});const jr=0,lo="identity",Lr=Or;var _o=Object.freeze({__proto__:null,identity:{code:jr,name:lo,encode:Lr,digest:e=>Ct(jr,Lr(e))}});new TextEncoder,new TextDecoder;const Br={...sa,...ca,...ha,...da,...ba,...Aa,...Ua,...Ra,...La,...Wa};({...ho,..._o});function $r(e,t,r,i){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:i}}}const Vr=$r("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),Nt=$r("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);const t=pr(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),Hr={utf8:Vr,"utf-8":Vr,hex:Br.base16,latin1:Nt,ascii:Nt,binary:Nt,...Br};function ge(e,t="utf8"){const r=Hr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ot(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function me(e,t="utf8"){const r=Hr[t];if(!r)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}const Ut="base10",Ee="base16",st="base64pad",ut="utf8",Tt=0,je=1,Do=0,Kr=1,It=12,Rt=32;function bo(){const e=St.generateKeyPair();return{privateKey:me(e.secretKey,Ee),publicKey:me(e.publicKey,Ee)}}function Eo(){const e=tt.randomBytes(Rt);return me(e,Ee)}function vo(e,t){const r=St.sharedKey(ge(e,Ee),ge(t,Ee)),i=new Bi(at.SHA256,r).expand(Rt);return me(i,Ee)}function yo(e){const t=at.hash(ge(e,Ee));return me(t,Ee)}function go(e){const t=at.hash(ge(e,ut));return me(t,Ee)}function Wr(e){return ge(`${e}`,Ut)}function We(e){return Number(me(e,Ut))}function mo(e){const t=Wr(typeof e.type<"u"?e.type:Tt);if(We(t)===je&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof e.senderPublicKey<"u"?ge(e.senderPublicKey,Ee):void 0,i=typeof e.iv<"u"?ge(e.iv,Ee):tt.randomBytes(It),a=new Et.ChaCha20Poly1305(ge(e.symKey,Ee)).seal(i,ge(e.message,ut));return qr({type:t,sealed:a,iv:i,senderPublicKey:r})}function wo(e){const t=new Et.ChaCha20Poly1305(ge(e.symKey,Ee)),{sealed:r,iv:i}=Pt(e.encoded),a=t.open(i,r);if(a===null)throw new Error("Failed to decrypt");return me(a,ut)}function qr(e){if(We(e.type)===je){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return me(Sr([e.type,e.senderPublicKey,e.iv,e.sealed]),st)}return me(Sr([e.type,e.iv,e.sealed]),st)}function Pt(e){const t=ge(e,st),r=t.slice(Do,Kr),i=Kr;if(We(r)===je){const s=i+Rt,d=s+It,l=t.slice(i,s),D=t.slice(s,d),y=t.slice(d);return{type:r,sealed:y,iv:D,senderPublicKey:l}}const a=i+It,u=t.slice(i,a),b=t.slice(a);return{type:r,sealed:b,iv:u}}function po(e,t){const r=Pt(e);return zr({type:We(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?me(r.senderPublicKey,Ee):void 0,receiverPublicKey:t?.receiverPublicKey})}function zr(e){const t=e?.type||Tt;if(t===je){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function So(e){return e.type===je&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var Yr=function(e,t,r){if(r||arguments.length===2)for(var i=0,a=t.length,u;i<a;i++)(u||!(i in t))&&(u||(u=Array.prototype.slice.call(t,0,i)),u[i]=t[i]);return e.concat(u||Array.prototype.slice.call(t))},Oo=function(){function e(t,r,i){this.name=t,this.version=r,this.os=i,this.type="browser"}return e}(),Ao=function(){function e(t){this.version=t,this.type="node",this.name="node",this.os=process.platform}return e}(),Co=function(){function e(t,r,i,a){this.name=t,this.version=r,this.os=i,this.bot=a,this.type="bot-device"}return e}(),No=function(){function e(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return e}(),Uo=function(){function e(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return e}(),To=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Io=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Gr=3,Ro=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",To]],xr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Po(e){return e?kr(e):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Uo:typeof navigator<"u"?kr(navigator.userAgent):jo()}function Fo(e){return e!==""&&Ro.reduce(function(t,r){var i=r[0],a=r[1];if(t)return t;var u=a.exec(e);return!!u&&[i,u]},!1)}function kr(e){var t=Fo(e);if(!t)return null;var r=t[0],i=t[1];if(r==="searchbot")return new No;var a=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);a?a.length<Gr&&(a=Yr(Yr([],a,!0),Lo(Gr-a.length),!0)):a=[];var u=a.join("."),b=Mo(e),s=Io.exec(e);return s&&s[1]?new Co(r,u,b,s[1]):new Oo(r,u,b)}function Mo(e){for(var t=0,r=xr.length;t<r;t++){var i=xr[t],a=i[0],u=i[1],b=u.exec(e);if(b)return a}return null}function jo(){var e=typeof process<"u"&&process.version;return e?new Ao(process.version.slice(1)):null}function Lo(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}var Ue={};/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var Ft=function(e,t){return Ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])},Ft(e,t)};function Bo(e,t){Ft(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Mt=function(){return Mt=Object.assign||function(t){for(var r,i=1,a=arguments.length;i<a;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},Mt.apply(this,arguments)};function $o(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(e);a<i.length;a++)t.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(e,i[a])&&(r[i[a]]=e[i[a]]);return r}function Vo(e,t,r,i){var a=arguments.length,u=a<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(b=e[s])&&(u=(a<3?b(u):a>3?b(t,r,u):b(t,r))||u);return a>3&&u&&Object.defineProperty(t,r,u),u}function Ho(e,t){return function(r,i){t(r,i,e)}}function Ko(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Wo(e,t,r,i){function a(u){return u instanceof r?u:new r(function(b){b(u)})}return new(r||(r=Promise))(function(u,b){function s(D){try{l(i.next(D))}catch(y){b(y)}}function d(D){try{l(i.throw(D))}catch(y){b(y)}}function l(D){D.done?u(D.value):a(D.value).then(s,d)}l((i=i.apply(e,t||[])).next())})}function qo(e,t){var r={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},i,a,u,b;return b={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function s(l){return function(D){return d([l,D])}}function d(l){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,a&&(u=l[0]&2?a.return:l[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,l[1])).done)return u;switch(a=0,u&&(l=[l[0]&2,u.value]),l[0]){case 0:case 1:u=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,a=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(u=r.trys,!(u=u.length>0&&u[u.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!u||l[1]>u[0]&&l[1]<u[3])){r.label=l[1];break}if(l[0]===6&&r.label<u[1]){r.label=u[1],u=l;break}if(u&&r.label<u[2]){r.label=u[2],r.ops.push(l);break}u[2]&&r.ops.pop(),r.trys.pop();continue}l=t.call(e,r)}catch(D){l=[6,D],a=0}finally{i=u=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function zo(e,t,r,i){i===void 0&&(i=r),e[i]=t[r]}function Yo(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function jt(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xr(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var i=r.call(e),a,u=[],b;try{for(;(t===void 0||t-- >0)&&!(a=i.next()).done;)u.push(a.value)}catch(s){b={error:s}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(b)throw b.error}}return u}function Go(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Xr(arguments[t]));return e}function xo(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),a=0,t=0;t<r;t++)for(var u=arguments[t],b=0,s=u.length;b<s;b++,a++)i[a]=u[b];return i}function qe(e){return this instanceof qe?(this.v=e,this):new qe(e)}function ko(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(e,t||[]),a,u=[];return a={},b("next"),b("throw"),b("return"),a[Symbol.asyncIterator]=function(){return this},a;function b(m){i[m]&&(a[m]=function(g){return new Promise(function(w,O){u.push([m,g,w,O])>1||s(m,g)})})}function s(m,g){try{d(i[m](g))}catch(w){y(u[0][3],w)}}function d(m){m.value instanceof qe?Promise.resolve(m.value.v).then(l,D):y(u[0][2],m)}function l(m){s("next",m)}function D(m){s("throw",m)}function y(m,g){m(g),u.shift(),u.length&&s(u[0][0],u[0][1])}}function Xo(e){var t,r;return t={},i("next"),i("throw",function(a){throw a}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(a,u){t[a]=e[a]?function(b){return(r=!r)?{value:qe(e[a](b)),done:a==="return"}:u?u(b):b}:u}}function Jo(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof jt=="function"?jt(e):e[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(u){r[u]=e[u]&&function(b){return new Promise(function(s,d){b=e[u](b),a(s,d,b.done,b.value)})}}function a(u,b,s,d){Promise.resolve(d).then(function(l){u({value:l,done:s})},b)}}function Qo(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Zo(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function es(e){return e&&e.__esModule?e:{default:e}}function ts(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function rs(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var ns=Object.freeze({__proto__:null,__extends:Bo,get __assign(){return Mt},__rest:$o,__decorate:Vo,__param:Ho,__metadata:Ko,__awaiter:Wo,__generator:qo,__createBinding:zo,__exportStar:Yo,__values:jt,__read:Xr,__spread:Go,__spreadArrays:xo,__await:qe,__asyncGenerator:ko,__asyncDelegator:Xo,__asyncValues:Jo,__makeTemplateObject:Qo,__importStar:Zo,__importDefault:es,__classPrivateFieldGet:ts,__classPrivateFieldSet:rs}),ct=ur(ns),Lt={},ze={},Jr;function is(){if(Jr)return ze;Jr=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.delay=void 0;function e(t){return new Promise(r=>{setTimeout(()=>{r(!0)},t)})}return ze.delay=e,ze}var Te={},Bt={},Ie={},Qr;function as(){return Qr||(Qr=1,Object.defineProperty(Ie,"__esModule",{value:!0}),Ie.ONE_THOUSAND=Ie.ONE_HUNDRED=void 0,Ie.ONE_HUNDRED=100,Ie.ONE_THOUSAND=1e3),Ie}var $t={},Zr;function os(){return Zr||(Zr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ONE_YEAR=e.FOUR_WEEKS=e.THREE_WEEKS=e.TWO_WEEKS=e.ONE_WEEK=e.THIRTY_DAYS=e.SEVEN_DAYS=e.FIVE_DAYS=e.THREE_DAYS=e.ONE_DAY=e.TWENTY_FOUR_HOURS=e.TWELVE_HOURS=e.SIX_HOURS=e.THREE_HOURS=e.ONE_HOUR=e.SIXTY_MINUTES=e.THIRTY_MINUTES=e.TEN_MINUTES=e.FIVE_MINUTES=e.ONE_MINUTE=e.SIXTY_SECONDS=e.THIRTY_SECONDS=e.TEN_SECONDS=e.FIVE_SECONDS=e.ONE_SECOND=void 0,e.ONE_SECOND=1,e.FIVE_SECONDS=5,e.TEN_SECONDS=10,e.THIRTY_SECONDS=30,e.SIXTY_SECONDS=60,e.ONE_MINUTE=e.SIXTY_SECONDS,e.FIVE_MINUTES=e.ONE_MINUTE*5,e.TEN_MINUTES=e.ONE_MINUTE*10,e.THIRTY_MINUTES=e.ONE_MINUTE*30,e.SIXTY_MINUTES=e.ONE_MINUTE*60,e.ONE_HOUR=e.SIXTY_MINUTES,e.THREE_HOURS=e.ONE_HOUR*3,e.SIX_HOURS=e.ONE_HOUR*6,e.TWELVE_HOURS=e.ONE_HOUR*12,e.TWENTY_FOUR_HOURS=e.ONE_HOUR*24,e.ONE_DAY=e.TWENTY_FOUR_HOURS,e.THREE_DAYS=e.ONE_DAY*3,e.FIVE_DAYS=e.ONE_DAY*5,e.SEVEN_DAYS=e.ONE_DAY*7,e.THIRTY_DAYS=e.ONE_DAY*30,e.ONE_WEEK=e.SEVEN_DAYS,e.TWO_WEEKS=e.ONE_WEEK*2,e.THREE_WEEKS=e.ONE_WEEK*3,e.FOUR_WEEKS=e.ONE_WEEK*4,e.ONE_YEAR=e.ONE_DAY*365}($t)),$t}var en;function tn(){return en||(en=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ct;t.__exportStar(as(),e),t.__exportStar(os(),e)}(Bt)),Bt}var rn;function ss(){if(rn)return Te;rn=1,Object.defineProperty(Te,"__esModule",{value:!0}),Te.fromMiliseconds=Te.toMiliseconds=void 0;const e=tn();function t(i){return i*e.ONE_THOUSAND}Te.toMiliseconds=t;function r(i){return Math.floor(i/e.ONE_THOUSAND)}return Te.fromMiliseconds=r,Te}var nn;function us(){return nn||(nn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ct;t.__exportStar(is(),e),t.__exportStar(ss(),e)}(Lt)),Lt}var Le={},an;function cs(){if(an)return Le;an=1,Object.defineProperty(Le,"__esModule",{value:!0}),Le.Watch=void 0;class e{constructor(){this.timestamps=new Map}start(r){if(this.timestamps.has(r))throw new Error(`Watch already started for label: ${r}`);this.timestamps.set(r,{started:Date.now()})}stop(r){const i=this.get(r);if(typeof i.elapsed<"u")throw new Error(`Watch already stopped for label: ${r}`);const a=Date.now()-i.started;this.timestamps.set(r,{started:i.started,elapsed:a})}get(r){const i=this.timestamps.get(r);if(typeof i>"u")throw new Error(`No timestamp found for label: ${r}`);return i}elapsed(r){const i=this.get(r);return i.elapsed||Date.now()-i.started}}return Le.Watch=e,Le.default=e,Le}var Vt={},Ye={},on;function fs(){if(on)return Ye;on=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.IWatch=void 0;class e{}return Ye.IWatch=e,Ye}var sn;function hs(){return sn||(sn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),ct.__exportStar(fs(),e)}(Vt)),Vt}(function(e){Object.defineProperty(e,"__esModule",{value:!0});const t=ct;t.__exportStar(us(),e),t.__exportStar(cs(),e),t.__exportStar(hs(),e),t.__exportStar(tn(),e)})(Ue);var z={};Object.defineProperty(z,"__esModule",{value:!0}),z.getLocalStorage=z.getLocalStorageOrThrow=z.getCrypto=z.getCryptoOrThrow=Kt=z.getLocation=z.getLocationOrThrow=Ht=z.getNavigator=z.getNavigatorOrThrow=un=z.getDocument=z.getDocumentOrThrow=z.getFromWindowOrThrow=z.getFromWindow=void 0;function Re(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}z.getFromWindow=Re;function Be(e){const t=Re(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}z.getFromWindowOrThrow=Be;function ls(){return Be("document")}z.getDocumentOrThrow=ls;function ds(){return Re("document")}var un=z.getDocument=ds;function _s(){return Be("navigator")}z.getNavigatorOrThrow=_s;function Ds(){return Re("navigator")}var Ht=z.getNavigator=Ds;function bs(){return Be("location")}z.getLocationOrThrow=bs;function Es(){return Re("location")}var Kt=z.getLocation=Es;function vs(){return Be("crypto")}z.getCryptoOrThrow=vs;function ys(){return Re("crypto")}z.getCrypto=ys;function gs(){return Be("localStorage")}z.getLocalStorageOrThrow=gs;function ms(){return Re("localStorage")}z.getLocalStorage=ms;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});var cn=Wt.getWindowMetadata=void 0;const fn=z;function ws(){let e,t;try{e=fn.getDocumentOrThrow(),t=fn.getLocationOrThrow()}catch{return null}function r(){const y=e.getElementsByTagName("link"),m=[];for(let g=0;g<y.length;g++){const w=y[g],O=w.getAttribute("rel");if(O&&O.toLowerCase().indexOf("icon")>-1){const p=w.getAttribute("href");if(p)if(p.toLowerCase().indexOf("https:")===-1&&p.toLowerCase().indexOf("http:")===-1&&p.indexOf("//")!==0){let U=t.protocol+"//"+t.host;if(p.indexOf("/")===0)U+=p;else{const _=t.pathname.split("/");_.pop();const v=_.join("/");U+=v+"/"+p}m.push(U)}else if(p.indexOf("//")===0){const U=t.protocol+p;m.push(U)}else m.push(p)}}return m}function i(...y){const m=e.getElementsByTagName("meta");for(let g=0;g<m.length;g++){const w=m[g],O=["itemprop","property","name"].map(p=>w.getAttribute(p)).filter(p=>p?y.includes(p):!1);if(O.length&&O){const p=w.getAttribute("content");if(p)return p}}return""}function a(){let y=i("name","og:site_name","og:title","twitter:title");return y||(y=e.title),y}function u(){return i("description","og:description","twitter:description","keywords")}const b=a(),s=u(),d=t.origin,l=r();return{description:s,url:d,icons:l,name:b}}cn=Wt.getWindowMetadata=ws;var Ge={},ps=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),hn="%[a-f0-9]{2}",ln=new RegExp("("+hn+")|([^%]+?)","gi"),dn=new RegExp("("+hn+")+","gi");function qt(e,t){try{return[decodeURIComponent(e.join(""))]}catch{}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),i=e.slice(t);return Array.prototype.concat.call([],qt(r),qt(i))}function Ss(e){try{return decodeURIComponent(e)}catch{for(var t=e.match(ln)||[],r=1;r<t.length;r++)e=qt(t,r).join(""),t=e.match(ln)||[];return e}}function Os(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=dn.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch{var i=Ss(r[0]);i!==r[0]&&(t[r[0]]=i)}r=dn.exec(e)}t["%C2"]="\uFFFD";for(var a=Object.keys(t),u=0;u<a.length;u++){var b=a[u];e=e.replace(new RegExp(b,"g"),t[b])}return e}var As=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch{return Os(e)}},Cs=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];const r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]},Ns=function(e,t){for(var r={},i=Object.keys(e),a=Array.isArray(t),u=0;u<i.length;u++){var b=i[u],s=e[b];(a?t.indexOf(b)!==-1:t(b,s,e))&&(r[b]=s)}return r};(function(e){const t=ps,r=As,i=Cs,a=Ns,u=_=>_==null,b=Symbol("encodeFragmentIdentifier");function s(_){switch(_.arrayFormat){case"index":return v=>(c,f)=>{const h=c.length;return f===void 0||_.skipNull&&f===null||_.skipEmptyString&&f===""?c:f===null?[...c,[D(v,_),"[",h,"]"].join("")]:[...c,[D(v,_),"[",D(h,_),"]=",D(f,_)].join("")]};case"bracket":return v=>(c,f)=>f===void 0||_.skipNull&&f===null||_.skipEmptyString&&f===""?c:f===null?[...c,[D(v,_),"[]"].join("")]:[...c,[D(v,_),"[]=",D(f,_)].join("")];case"colon-list-separator":return v=>(c,f)=>f===void 0||_.skipNull&&f===null||_.skipEmptyString&&f===""?c:f===null?[...c,[D(v,_),":list="].join("")]:[...c,[D(v,_),":list=",D(f,_)].join("")];case"comma":case"separator":case"bracket-separator":{const v=_.arrayFormat==="bracket-separator"?"[]=":"=";return c=>(f,h)=>h===void 0||_.skipNull&&h===null||_.skipEmptyString&&h===""?f:(h=h===null?"":h,f.length===0?[[D(c,_),v,D(h,_)].join("")]:[[f,D(h,_)].join(_.arrayFormatSeparator)])}default:return v=>(c,f)=>f===void 0||_.skipNull&&f===null||_.skipEmptyString&&f===""?c:f===null?[...c,D(v,_)]:[...c,[D(v,_),"=",D(f,_)].join("")]}}function d(_){let v;switch(_.arrayFormat){case"index":return(c,f,h)=>{if(v=/\[(\d*)\]$/.exec(c),c=c.replace(/\[\d*\]$/,""),!v){h[c]=f;return}h[c]===void 0&&(h[c]={}),h[c][v[1]]=f};case"bracket":return(c,f,h)=>{if(v=/(\[\])$/.exec(c),c=c.replace(/\[\]$/,""),!v){h[c]=f;return}if(h[c]===void 0){h[c]=[f];return}h[c]=[].concat(h[c],f)};case"colon-list-separator":return(c,f,h)=>{if(v=/(:list)$/.exec(c),c=c.replace(/:list$/,""),!v){h[c]=f;return}if(h[c]===void 0){h[c]=[f];return}h[c]=[].concat(h[c],f)};case"comma":case"separator":return(c,f,h)=>{const n=typeof f=="string"&&f.includes(_.arrayFormatSeparator),o=typeof f=="string"&&!n&&y(f,_).includes(_.arrayFormatSeparator);f=o?y(f,_):f;const S=n||o?f.split(_.arrayFormatSeparator).map(C=>y(C,_)):f===null?f:y(f,_);h[c]=S};case"bracket-separator":return(c,f,h)=>{const n=/(\[\])$/.test(c);if(c=c.replace(/\[\]$/,""),!n){h[c]=f&&y(f,_);return}const o=f===null?[]:f.split(_.arrayFormatSeparator).map(S=>y(S,_));if(h[c]===void 0){h[c]=o;return}h[c]=[].concat(h[c],o)};default:return(c,f,h)=>{if(h[c]===void 0){h[c]=f;return}h[c]=[].concat(h[c],f)}}}function l(_){if(typeof _!="string"||_.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function D(_,v){return v.encode?v.strict?t(_):encodeURIComponent(_):_}function y(_,v){return v.decode?r(_):_}function m(_){return Array.isArray(_)?_.sort():typeof _=="object"?m(Object.keys(_)).sort((v,c)=>Number(v)-Number(c)).map(v=>_[v]):_}function g(_){const v=_.indexOf("#");return v!==-1&&(_=_.slice(0,v)),_}function w(_){let v="";const c=_.indexOf("#");return c!==-1&&(v=_.slice(c)),v}function O(_){_=g(_);const v=_.indexOf("?");return v===-1?"":_.slice(v+1)}function p(_,v){return v.parseNumbers&&!Number.isNaN(Number(_))&&typeof _=="string"&&_.trim()!==""?_=Number(_):v.parseBooleans&&_!==null&&(_.toLowerCase()==="true"||_.toLowerCase()==="false")&&(_=_.toLowerCase()==="true"),_}function U(_,v){v=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},v),l(v.arrayFormatSeparator);const c=d(v),f=Object.create(null);if(typeof _!="string"||(_=_.trim().replace(/^[?#&]/,""),!_))return f;for(const h of _.split("&")){if(h==="")continue;let[n,o]=i(v.decode?h.replace(/\+/g," "):h,"=");o=o===void 0?null:["comma","separator","bracket-separator"].includes(v.arrayFormat)?o:y(o,v),c(y(n,v),o,f)}for(const h of Object.keys(f)){const n=f[h];if(typeof n=="object"&&n!==null)for(const o of Object.keys(n))n[o]=p(n[o],v);else f[h]=p(n,v)}return v.sort===!1?f:(v.sort===!0?Object.keys(f).sort():Object.keys(f).sort(v.sort)).reduce((h,n)=>{const o=f[n];return Boolean(o)&&typeof o=="object"&&!Array.isArray(o)?h[n]=m(o):h[n]=o,h},Object.create(null))}e.extract=O,e.parse=U,e.stringify=(_,v)=>{if(!_)return"";v=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},v),l(v.arrayFormatSeparator);const c=o=>v.skipNull&&u(_[o])||v.skipEmptyString&&_[o]==="",f=s(v),h={};for(const o of Object.keys(_))c(o)||(h[o]=_[o]);const n=Object.keys(h);return v.sort!==!1&&n.sort(v.sort),n.map(o=>{const S=_[o];return S===void 0?"":S===null?D(o,v):Array.isArray(S)?S.length===0&&v.arrayFormat==="bracket-separator"?D(o,v)+"[]":S.reduce(f(o),[]).join("&"):D(o,v)+"="+D(S,v)}).filter(o=>o.length>0).join("&")},e.parseUrl=(_,v)=>{v=Object.assign({decode:!0},v);const[c,f]=i(_,"#");return Object.assign({url:c.split("?")[0]||"",query:U(O(_),v)},v&&v.parseFragmentIdentifier&&f?{fragmentIdentifier:y(f,v)}:{})},e.stringifyUrl=(_,v)=>{v=Object.assign({encode:!0,strict:!0,[b]:!0},v);const c=g(_.url).split("?")[0]||"",f=e.extract(_.url),h=e.parse(f,{sort:!1}),n=Object.assign(h,_.query);let o=e.stringify(n,v);o&&(o=`?${o}`);let S=w(_.url);return _.fragmentIdentifier&&(S=`#${v[b]?D(_.fragmentIdentifier,v):_.fragmentIdentifier}`),`${c}${o}${S}`},e.pick=(_,v,c)=>{c=Object.assign({parseFragmentIdentifier:!0,[b]:!1},c);const{url:f,query:h,fragmentIdentifier:n}=e.parseUrl(_,c);return e.stringifyUrl({url:f,query:a(h,v),fragmentIdentifier:n},c)},e.exclude=(_,v,c)=>{const f=Array.isArray(v)?h=>!v.includes(h):(h,n)=>!v(h,n);return e.pick(_,f,c)}})(Ge);var Us=Object.defineProperty,_n=Object.getOwnPropertySymbols,Ts=Object.prototype.hasOwnProperty,Is=Object.prototype.propertyIsEnumerable,Dn=(e,t,r)=>t in e?Us(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,bn=(e,t)=>{for(var r in t||(t={}))Ts.call(t,r)&&Dn(e,r,t[r]);if(_n)for(var r of _n(t))Is.call(t,r)&&Dn(e,r,t[r]);return e};const En="ReactNative",$e={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ft=" ",Rs=":",vn="/",zt=2,Ps=1e3,yn="js";function Yt(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function gn(){return!un()&&!!Ht()&&navigator.product===En}function mn(){return!Yt()&&!!Ht()}function Gt(){return gn()?$e.reactNative:Yt()?$e.node:mn()?$e.browser:$e.unknown}function wn(e,t){let r=Ge.parse(e);return r=bn(bn({},r),t),e=Ge.stringify(r),e}function Fs(){return cn()||{name:"",description:"",url:"",icons:[""]}}function Ms(e,t){var r;const i=Gt(),a={protocol:e,version:t,env:i};return i==="browser"&&(a.host=((r=Kt())==null?void 0:r.host)||"unknown"),a}function pn(){const e=Po();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function Sn(){var e;const t=Gt();return t===$e.browser?[t,((e=Kt())==null?void 0:e.host)||"unknown"].join(":"):t}function On(e,t,r){const i=pn(),a=Sn();return[[e,t].join("-"),[yn,r].join("-"),i,a].join("/")}function js({protocol:e,version:t,relayUrl:r,sdkVersion:i,auth:a,projectId:u,useOnCloseEvent:b}){const s=r.split("?"),d=On(e,t,i),l={auth:a,ua:d,projectId:u,useOnCloseEvent:b||void 0},D=wn(s[1]||"",l);return s[0]+"?"+D}function Ls(e){let t=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const r=typeof t<"u"?e.split("://")[1]:e;return t=t==="wss"?"https":"http",[t,r].join("://")}function Bs(e,t,r){if(!e[t]||typeof e[t]!==r)throw new Error(`Missing or invalid "${t}" param`)}function An(e,t=zt){return Cn(e.split(vn),t)}function $s(e){return An(e).join(ft)}function Ae(e,t){return e.filter(r=>t.includes(r)).length===e.length}function Cn(e,t=zt){return e.slice(Math.max(e.length-t,0))}function Vs(e){return Object.fromEntries(e.entries())}function Hs(e){return new Map(Object.entries(e))}function Ks(e,t){const r={};return Object.keys(e).forEach(i=>{r[i]=t(e[i])}),r}const Ws=e=>e;function Nn(e){return e.trim().replace(/^\w/,t=>t.toUpperCase())}function qs(e){return e.split(ft).map(t=>Nn(t)).join(ft)}function zs(e=Ue.FIVE_MINUTES,t){const r=Ue.toMiliseconds(e||Ue.FIVE_MINUTES);let i,a,u;return{resolve:b=>{u&&i&&(clearTimeout(u),i(b))},reject:b=>{u&&a&&(clearTimeout(u),a(b))},done:()=>new Promise((b,s)=>{u=setTimeout(()=>{s(new Error(t))},r),i=b,a=s})}}function Ys(e,t,r){return new Promise(async(i,a)=>{const u=setTimeout(()=>a(new Error(r)),t);try{const b=await e;i(b)}catch(b){a(b)}clearTimeout(u)})}function xt(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function Gs(e){return xt("topic",e)}function xs(e){return xt("id",e)}function ks(e){const[t,r]=e.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof r=="string")i.topic=r;else if(t==="id"&&Number.isInteger(Number(r)))i.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${r}`);return i}function Xs(e,t){return Ue.fromMiliseconds((t||Date.now())+Ue.toMiliseconds(e))}function Js(e){return Date.now()>=Ue.toMiliseconds(e)}function Qs(e,t){return`${e}${t?`:${t}`:""}`}function Ce(e=[],t=[]){return[...new Set([...e,...t])]}const Zs={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}},Un="irn";function eu(e){return e?.relay||{protocol:Un}}function tu(e){const t=Zs[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var ru=Object.defineProperty,Tn=Object.getOwnPropertySymbols,nu=Object.prototype.hasOwnProperty,iu=Object.prototype.propertyIsEnumerable,In=(e,t,r)=>t in e?ru(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,au=(e,t)=>{for(var r in t||(t={}))nu.call(t,r)&&In(e,r,t[r]);if(Tn)for(var r of Tn(t))iu.call(t,r)&&In(e,r,t[r]);return e};function Rn(e,t="-"){const r={},i="relay"+t;return Object.keys(e).forEach(a=>{if(a.startsWith(i)){const u=a.replace(i,""),b=e[a];r[u]=b}}),r}function ou(e){const t=e.indexOf(":"),r=e.indexOf("?")!==-1?e.indexOf("?"):void 0,i=e.substring(0,t),a=e.substring(t+1,r).split("@"),u=typeof r<"u"?e.substring(r):"",b=Ge.parse(u);return{protocol:i,topic:Pn(a[0]),version:parseInt(a[1],10),symKey:b.symKey,relay:Rn(b)}}function Pn(e){return e.startsWith("//")?e.substring(2):e}function Fn(e,t="-"){const r="relay",i={};return Object.keys(e).forEach(a=>{const u=r+t+a;e[a]&&(i[u]=e[a])}),i}function su(e){return`${e.protocol}:${e.topic}@${e.version}?`+Ge.stringify(au({symKey:e.symKey},Fn(e.relay)))}var uu=Object.defineProperty,cu=Object.defineProperties,fu=Object.getOwnPropertyDescriptors,Mn=Object.getOwnPropertySymbols,hu=Object.prototype.hasOwnProperty,lu=Object.prototype.propertyIsEnumerable,jn=(e,t,r)=>t in e?uu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,du=(e,t)=>{for(var r in t||(t={}))hu.call(t,r)&&jn(e,r,t[r]);if(Mn)for(var r of Mn(t))lu.call(t,r)&&jn(e,r,t[r]);return e},_u=(e,t)=>cu(e,fu(t));function Pe(e){const t=[];return e.forEach(r=>{const[i,a]=r.split(":");t.push(`${i}:${a}`)}),t}function Ln(e){const t=[];return Object.values(e).forEach(r=>{t.push(...Pe(r.accounts))}),t}function Bn(e,t){const r=[];return Object.values(e).forEach(i=>{Pe(i.accounts).includes(t)&&r.push(...i.methods)}),r}function $n(e,t){const r=[];return Object.values(e).forEach(i=>{Pe(i.accounts).includes(t)&&r.push(...i.events)}),r}function Du(e,t){const r=Gn(e,t);if(r)throw new Error(r.message);const i={};for(const[a,u]of Object.entries(e))i[a]={methods:u.methods,events:u.events,chains:u.accounts.map(b=>`${b.split(":")[0]}:${b.split(":")[1]}`)};return i}function bu(e){const{proposal:{requiredNamespaces:t,optionalNamespaces:r={}},supportedNamespaces:i}=e,a=Xt(t),u=Xt(r),b={};Object.keys(i).forEach(l=>{const D=i[l].chains,y=i[l].methods,m=i[l].events,g=i[l].accounts;b[l]={chains:D,methods:y,events:m,accounts:g}});const s=kn(t,b,"approve()");if(s)throw new Error(s.message);const d={};return Object.keys(a).forEach(l=>{const D=i[l].chains.filter(w=>{var O,p;return(p=(O=a[l])==null?void 0:O.chains)==null?void 0:p.includes(w)}),y=i[l].methods.filter(w=>{var O,p;return(p=(O=a[l])==null?void 0:O.methods)==null?void 0:p.includes(w)}),m=i[l].events.filter(w=>{var O,p;return(p=(O=a[l])==null?void 0:O.events)==null?void 0:p.includes(w)}),g=D.map(w=>i[l].accounts.filter(O=>O.includes(`${w}:`))).flat();d[l]={chains:D,methods:y,events:m,accounts:g}}),Object.keys(u).forEach(l=>{var D,y,m,g,w,O;if(!i[l])return;const p=(y=(D=u[l])==null?void 0:D.chains)==null?void 0:y.filter(c=>i[l].chains.includes(c)),U=i[l].methods.filter(c=>{var f,h;return(h=(f=u[l])==null?void 0:f.methods)==null?void 0:h.includes(c)}),_=i[l].events.filter(c=>{var f,h;return(h=(f=u[l])==null?void 0:f.events)==null?void 0:h.includes(c)}),v=p?.map(c=>i[l].accounts.filter(f=>f.includes(c))).flat();d[l]={chains:Ce((m=d[l])==null?void 0:m.chains,p),methods:Ce((g=d[l])==null?void 0:g.methods,U),events:Ce((w=d[l])==null?void 0:w.events,_),accounts:Ce((O=d[l])==null?void 0:O.accounts,v)}}),d}function kt(e){return e.includes(":")}function Vn(e){return kt(e)?e.split(":")[0]:e}function Xt(e){var t,r,i;const a={};if(!ht(e))return a;for(const[u,b]of Object.entries(e)){const s=kt(u)?[u]:b.chains,d=b.methods||[],l=b.events||[],D=Vn(u);a[D]=_u(du({},a[D]),{chains:Ce(s,(t=a[D])==null?void 0:t.chains),methods:Ce(d,(r=a[D])==null?void 0:r.methods),events:Ce(l,(i=a[D])==null?void 0:i.events)})}return a}const Eu={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},vu={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function pe(e,t){const{message:r,code:i}=vu[e];return{message:t?`${r} ${t}`:r,code:i}}function Fe(e,t){const{message:r,code:i}=Eu[e];return{message:t?`${r} ${t}`:r,code:i}}function xe(e,t){return Array.isArray(e)?typeof t<"u"&&e.length?e.every(t):!0:!1}function ht(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Ne(e){return typeof e>"u"}function ve(e,t){return t&&Ne(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function lt(e,t){return t&&Ne(e)?!0:typeof e=="number"&&!isNaN(e)}function yu(e,t){const{requiredNamespaces:r}=t,i=Object.keys(e.namespaces),a=Object.keys(r);let u=!0;return Ae(a,i)?(i.forEach(b=>{const{accounts:s,methods:d,events:l}=e.namespaces[b],D=Pe(s),y=r[b];(!Ae(Xe(b,y),D)||!Ae(y.methods,d)||!Ae(y.events,l))&&(u=!1)}),u):!1}function dt(e){return ve(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Hn(e){if(ve(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const r=t[0]+":"+t[1];return!!t[2]&&dt(r)}}return!1}function gu(e){if(ve(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function mu(e){var t;return(t=e?.proposer)==null?void 0:t.publicKey}function wu(e){return e?.topic}function pu(e,t){let r=null;return ve(e?.publicKey,!1)||(r=pe("MISSING_OR_INVALID",`${t} controller public key should be a string`)),r}function Jt(e){let t=!0;return xe(e)?e.length&&(t=e.every(r=>ve(r,!1))):t=!1,t}function Kn(e,t,r){let i=null;return xe(t)?t.forEach(a=>{i||(!dt(a)||!a.includes(e))&&(i=Fe("UNSUPPORTED_CHAINS",`${r}, chain ${a} should be a string and conform to "namespace:chainId" format`))}):i=Fe("UNSUPPORTED_CHAINS",`${r}, chains ${t} should be an array of strings conforming to "namespace:chainId" format`),i}function Wn(e,t){let r=null;return Object.entries(e).forEach(([i,a])=>{if(r)return;const u=Kn(i,Xe(i,a),`${t} requiredNamespace`);u&&(r=u)}),r}function qn(e,t){let r=null;return xe(e)?e.forEach(i=>{r||Hn(i)||(r=Fe("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):r=Fe("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function zn(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=qn(i?.accounts,`${t} namespace`);a&&(r=a)}),r}function Yn(e,t){let r=null;return Jt(e?.methods)?Jt(e?.events)||(r=Fe("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):r=Fe("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),r}function Qt(e,t){let r=null;return Object.values(e).forEach(i=>{if(r)return;const a=Yn(i,`${t}, namespace`);a&&(r=a)}),r}function Su(e,t,r){let i=null;if(e&&ht(e)){const a=Qt(e,t);a&&(i=a);const u=Wn(e,t);u&&(i=u)}else i=pe("MISSING_OR_INVALID",`${t}, ${r} should be an object with data`);return i}function Gn(e,t){let r=null;if(e&&ht(e)){const i=Qt(e,t);i&&(r=i);const a=zn(e,t);a&&(r=a)}else r=pe("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return r}function xn(e){return ve(e.protocol,!0)}function Ou(e,t){let r=!1;return t&&!e?r=!0:e&&xe(e)&&e.length&&e.forEach(i=>{r=xn(i)}),r}function Au(e){return typeof e=="number"}function Cu(e){return typeof e<"u"&&typeof e!==null}function Nu(e){return!(!e||typeof e!="object"||!e.code||!lt(e.code,!1)||!e.message||!ve(e.message,!1))}function Uu(e){return!(Ne(e)||!ve(e.method,!1))}function Tu(e){return!(Ne(e)||Ne(e.result)&&Ne(e.error)||!lt(e.id,!1)||!ve(e.jsonrpc,!1))}function Iu(e){return!(Ne(e)||!ve(e.name,!1))}function Ru(e,t){return!(!dt(t)||!Ln(e).includes(t))}function Pu(e,t,r){return ve(r,!1)?Bn(e,t).includes(r):!1}function Fu(e,t,r){return ve(r,!1)?$n(e,t).includes(r):!1}function kn(e,t,r){let i=null;const a=Mu(e),u=ju(t),b=Object.keys(a),s=Object.keys(u),d=Xn(Object.keys(e)),l=Xn(Object.keys(t)),D=d.filter(y=>!l.includes(y));return D.length&&(i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${D.toString()}
      Received: ${Object.keys(t).toString()}`)),Ae(b,s)||(i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${b.toString()}
      Approved: ${s.toString()}`)),Object.keys(t).forEach(y=>{if(!y.includes(":")||i)return;const m=Pe(t[y].accounts);m.includes(y)||(i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${y}
        Required: ${y}
        Approved: ${m.toString()}`))}),b.forEach(y=>{i||(Ae(a[y].methods,u[y].methods)?Ae(a[y].events,u[y].events)||(i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${y}`)):i=pe("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${y}`))}),i}function Mu(e){const t={};return Object.keys(e).forEach(r=>{var i;r.includes(":")?t[r]=e[r]:(i=e[r].chains)==null||i.forEach(a=>{t[a]={methods:e[r].methods,events:e[r].events}})}),t}function Xn(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function ju(e){const t={};return Object.keys(e).forEach(r=>{if(r.includes(":"))t[r]=e[r];else{const i=Pe(e[r].accounts);i?.forEach(a=>{t[a]={accounts:e[r].accounts.filter(u=>u.includes(`${a}:`)),methods:e[r].methods,events:e[r].events}})}}),t}function Lu(e,t){return lt(e,!1)&&e<=t.max&&e>=t.min}E.BASE10=Ut,E.BASE16=Ee,E.BASE64=st,E.COLON=Rs,E.DEFAULT_DEPTH=zt,E.EMPTY_SPACE=ft,E.ENV_MAP=$e,E.ONE_THOUSAND=Ps,E.REACT_NATIVE_PRODUCT=En,E.RELAYER_DEFAULT_PROTOCOL=Un,E.SDK_TYPE=yn,E.SLASH=vn,E.TYPE_0=Tt,E.TYPE_1=je,E.UTF8=ut,E.appendToQueryString=wn,E.assertType=Bs,E.buildApprovedNamespaces=bu,E.calcExpiry=Xs,E.capitalize=qs,E.capitalizeWord=Nn,E.createDelayedPromise=zs,E.createExpiringPromise=Ys,E.decodeTypeByte=We,E.decrypt=wo,E.deriveSymKey=vo,E.deserialize=Pt,E.encodeTypeByte=Wr,E.encrypt=mo,E.engineEvent=Qs,E.enumify=Ws,E.formatAccountId=rr,E.formatAccountWithChain=Qn,E.formatChainId=tr,E.formatExpirerTarget=xt,E.formatIdTarget=xs,E.formatMessage=ii,E.formatMessageContext=$s,E.formatRelayParams=Fn,E.formatRelayRpcUrl=js,E.formatTopicTarget=Gs,E.formatUA=On,E.formatUri=su,E.generateKeyPair=bo,E.generateRandomBytes32=Eo,E.getAccountsChains=Pe,E.getAccountsFromNamespaces=ei,E.getAddressFromAccount=nr,E.getAddressesFromAccounts=Zn,E.getAppMetadata=Fs,E.getChainFromAccount=ir,E.getChainsFromAccounts=ar,E.getChainsFromNamespace=Xe,E.getChainsFromNamespaces=ti,E.getChainsFromRequiredNamespaces=ri,E.getDidAddress=sr,E.getDidAddressSegments=Je,E.getDidChainId=or,E.getEnvironment=Gt,E.getHttpUrl=Ls,E.getInternalError=pe,E.getJavascriptID=Sn,E.getJavascriptOS=pn,E.getLastItems=Cn,E.getNamespacedDidChainId=ni,E.getNamespacesChains=Ln,E.getNamespacesEventsForChainId=$n,E.getNamespacesMethodsForChainId=Bn,E.getRelayClientMetadata=Ms,E.getRelayProtocolApi=tu,E.getRelayProtocolName=eu,E.getRequiredNamespacesFromNamespaces=Du,E.getSdkError=Fe,E.getUniqueValues=bt,E.hasOverlap=Ae,E.hashKey=yo,E.hashMessage=go,E.isBrowser=mn,E.isCaipNamespace=kt,E.isConformingNamespaces=kn,E.isExpired=Js,E.isNode=Yt,E.isProposalStruct=mu,E.isReactNative=gn,E.isSessionCompatible=yu,E.isSessionStruct=wu,E.isTypeOneEnvelope=So,E.isUndefined=Ne,E.isValidAccountId=Hn,E.isValidAccounts=qn,E.isValidActions=Yn,E.isValidArray=xe,E.isValidChainId=dt,E.isValidChains=Kn,E.isValidController=pu,E.isValidErrorReason=Nu,E.isValidEvent=Iu,E.isValidId=Au,E.isValidNamespaceAccounts=zn,E.isValidNamespaceActions=Qt,E.isValidNamespaceChains=Wn,E.isValidNamespaceMethodsOrEvents=Jt,E.isValidNamespaces=Gn,E.isValidNamespacesChainId=Ru,E.isValidNamespacesEvent=Fu,E.isValidNamespacesRequest=Pu,E.isValidNumber=lt,E.isValidObject=ht,E.isValidParams=Cu,E.isValidRelay=xn,E.isValidRelays=Ou,E.isValidRequest=Uu,E.isValidRequestExpiry=Lu,E.isValidRequiredNamespaces=Su,E.isValidResponse=Tu,E.isValidString=ve,E.isValidUrl=gu,E.mapEntries=Ks,E.mapToObj=Vs,E.mergeArrays=Ce,E.normalizeNamespaces=Xt,E.objToMap=Hs,E.parseAccountId=Dt,E.parseChainId=er,E.parseContextNames=An,E.parseExpirerTarget=ks,E.parseNamespaceKey=Vn,E.parseRelayParams=Rn,E.parseTopic=Pn,E.parseUri=ou,E.serialize=qr,E.validateDecoding=po,E.validateEncoding=zr,Object.defineProperty(E,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
