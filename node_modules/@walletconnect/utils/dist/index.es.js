import{ChaCha20Poly1305 as ie}from"@stablelib/chacha20poly1305";import{HKDF as pn}from"@stablelib/hkdf";import{randomBytes as ce}from"@stablelib/random";import{SHA256 as mn,hash as ae}from"@stablelib/sha256";import*as ue from"@stablelib/x25519";import{toString as E,fromString as h,concat as de}from"uint8arrays";import{detect as yn}from"detect-browser";import{toMiliseconds as q,FIVE_MINUTES as le,fromMiliseconds as En}from"@walletconnect/time";import{getDocument as hn,getNavigator as fe,getLocation as pe}from"@walletconnect/window-getters";import{getWindowMetadata as vn}from"@walletconnect/window-metadata";import*as $ from"query-string";import{RELAY_JSONRPC as gn}from"@walletconnect/relay-api";const D=":";function me(e){const[n,t]=e.split(D);return{namespace:n,reference:t}}function ye(e){const{namespace:n,reference:t}=e;return[n,t].join(D)}function z(e){const[n,t,r]=e.split(D);return{namespace:n,reference:t,address:r}}function Ee(e){const{namespace:n,reference:t,address:r}=e;return[n,t,r].join(D)}function B(e,n){const t=[];return e.forEach(r=>{const o=n(r);t.includes(o)||t.push(o)}),t}function he(e){const{address:n}=z(e);return n}function ve(e){const{namespace:n,reference:t}=z(e);return ye({namespace:n,reference:t})}function Nn(e,n){const{namespace:t,reference:r}=me(n);return Ee({namespace:t,reference:r,address:e})}function bn(e){return B(e,he)}function ge(e){return B(e,ve)}function On(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...o.accounts)}),t}function Sn(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...ge(o.accounts))}),t}function In(e,n=[]){const t=[];return Object.keys(e).forEach(r=>{if(n.length&&!n.includes(r))return;const o=e[r];t.push(...V(r,o))}),t}function V(e,n){return e.includes(":")?[e]:n.chains||[]}const M=e=>e?.split(":"),Ne=e=>{const n=e&&M(e);if(n)return n[3]},Pn=e=>{const n=e&&M(e);if(n)return n[2]+":"+n[3]},be=e=>{const n=e&&M(e);if(n)return n.pop()},Tn=(e,n)=>{const t=`${e.domain} wants you to sign in with your Ethereum account:`,r=be(n),o=e.statement,s=`URI: ${e.aud}`,c=`Version: ${e.version}`,d=`Chain ID: ${Ne(n)}`,l=`Nonce: ${e.nonce}`,i=`Issued At: ${e.iat}`,u=e.resources&&e.resources.length>0?`Resources:
${e.resources.map(a=>`- ${a}`).join(`
`)}`:void 0;return[t,r,"",o,"",s,c,d,l,i,u].filter(a=>a!=null).join(`
`)},G="base10",f="base16",K="base64pad",k="utf8",W=0,U=1,Rn=0,Oe=1,Y=12,J=32;function An(){const e=ue.generateKeyPair();return{privateKey:E(e.secretKey,f),publicKey:E(e.publicKey,f)}}function Un(){const e=ce(J);return E(e,f)}function _n(e,n){const t=ue.sharedKey(h(e,f),h(n,f)),r=new pn(mn,t).expand(J);return E(r,f)}function wn(e){const n=ae(h(e,f));return E(n,f)}function jn(e){const n=ae(h(e,k));return E(n,f)}function Se(e){return h(`${e}`,G)}function j(e){return Number(E(e,G))}function Cn(e){const n=Se(typeof e.type<"u"?e.type:W);if(j(n)===U&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const t=typeof e.senderPublicKey<"u"?h(e.senderPublicKey,f):void 0,r=typeof e.iv<"u"?h(e.iv,f):ce(Y),o=new ie(h(e.symKey,f)).seal(r,h(e.message,k));return Ie({type:n,sealed:o,iv:r,senderPublicKey:t})}function $n(e){const n=new ie(h(e.symKey,f)),{sealed:t,iv:r}=Q(e.encoded),o=n.open(r,t);if(o===null)throw new Error("Failed to decrypt");return E(o,k)}function Ie(e){if(j(e.type)===U){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return E(de([e.type,e.senderPublicKey,e.iv,e.sealed]),K)}return E(de([e.type,e.iv,e.sealed]),K)}function Q(e){const n=h(e,K),t=n.slice(Rn,Oe),r=Oe;if(j(t)===U){const d=r+J,l=d+Y,i=n.slice(r,d),u=n.slice(d,l),a=n.slice(l);return{type:t,sealed:a,iv:u,senderPublicKey:i}}const o=r+Y,s=n.slice(r,o),c=n.slice(o);return{type:t,sealed:c,iv:s}}function Dn(e,n){const t=Q(e);return Pe({type:j(t.type),senderPublicKey:typeof t.senderPublicKey<"u"?E(t.senderPublicKey,f):void 0,receiverPublicKey:n?.receiverPublicKey})}function Pe(e){const n=e?.type||W;if(n===U){if(typeof e?.senderPublicKey>"u")throw new Error("missing sender public key");if(typeof e?.receiverPublicKey>"u")throw new Error("missing receiver public key")}return{type:n,senderPublicKey:e?.senderPublicKey,receiverPublicKey:e?.receiverPublicKey}}function Vn(e){return e.type===U&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}var Mn=Object.defineProperty,Te=Object.getOwnPropertySymbols,Kn=Object.prototype.hasOwnProperty,kn=Object.prototype.propertyIsEnumerable,Re=(e,n,t)=>n in e?Mn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Ae=(e,n)=>{for(var t in n||(n={}))Kn.call(n,t)&&Re(e,t,n[t]);if(Te)for(var t of Te(n))kn.call(n,t)&&Re(e,t,n[t]);return e};const Ue="ReactNative",_={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},L=" ",Ln=":",_e="/",Z=2,xn=1e3,we="js";function X(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function je(){return!hn()&&!!fe()&&navigator.product===Ue}function Ce(){return!X()&&!!fe()}function ee(){return je()?_.reactNative:X()?_.node:Ce()?_.browser:_.unknown}function $e(e,n){let t=$.parse(e);return t=Ae(Ae({},t),n),e=$.stringify(t),e}function Fn(){return vn()||{name:"",description:"",url:"",icons:[""]}}function Hn(e,n){var t;const r=ee(),o={protocol:e,version:n,env:r};return r==="browser"&&(o.host=((t=pe())==null?void 0:t.host)||"unknown"),o}function De(){const e=yn();if(e===null)return"unknown";const n=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[n,e.name,e.version].join("-"):[n,e.version].join("-")}function Ve(){var e;const n=ee();return n===_.browser?[n,((e=pe())==null?void 0:e.host)||"unknown"].join(":"):n}function Me(e,n,t){const r=De(),o=Ve();return[[e,n].join("-"),[we,t].join("-"),r,o].join("/")}function qn({protocol:e,version:n,relayUrl:t,sdkVersion:r,auth:o,projectId:s,useOnCloseEvent:c}){const d=t.split("?"),l=Me(e,n,r),i={auth:o,ua:l,projectId:s,useOnCloseEvent:c||void 0},u=$e(d[1]||"",i);return d[0]+"?"+u}function zn(e){let n=(e.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const t=typeof n<"u"?e.split("://")[1]:e;return n=n==="wss"?"https":"http",[n,t].join("://")}function Bn(e,n,t){if(!e[n]||typeof e[n]!==t)throw new Error(`Missing or invalid "${n}" param`)}function Ke(e,n=Z){return ke(e.split(_e),n)}function Gn(e){return Ke(e).join(L)}function b(e,n){return e.filter(t=>n.includes(t)).length===e.length}function ke(e,n=Z){return e.slice(Math.max(e.length-n,0))}function Wn(e){return Object.fromEntries(e.entries())}function Yn(e){return new Map(Object.entries(e))}function Jn(e,n){const t={};return Object.keys(e).forEach(r=>{t[r]=n(e[r])}),t}const Qn=e=>e;function Le(e){return e.trim().replace(/^\w/,n=>n.toUpperCase())}function Zn(e){return e.split(L).map(n=>Le(n)).join(L)}function Xn(e=le,n){const t=q(e||le);let r,o,s;return{resolve:c=>{s&&r&&(clearTimeout(s),r(c))},reject:c=>{s&&o&&(clearTimeout(s),o(c))},done:()=>new Promise((c,d)=>{s=setTimeout(()=>{d(new Error(n))},t),r=c,o=d})}}function et(e,n,t){return new Promise(async(r,o)=>{const s=setTimeout(()=>o(new Error(t)),n);try{const c=await e;r(c)}catch(c){o(c)}clearTimeout(s)})}function ne(e,n){if(typeof n=="string"&&n.startsWith(`${e}:`))return n;if(e.toLowerCase()==="topic"){if(typeof n!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${n}`}else if(e.toLowerCase()==="id"){if(typeof n!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${n}`}throw new Error(`Unknown expirer target type: ${e}`)}function nt(e){return ne("topic",e)}function tt(e){return ne("id",e)}function rt(e){const[n,t]=e.split(":"),r={id:void 0,topic:void 0};if(n==="topic"&&typeof t=="string")r.topic=t;else if(n==="id"&&Number.isInteger(Number(t)))r.id=Number(t);else throw new Error(`Invalid target, expected id:number or topic:string, got ${n}:${t}`);return r}function ot(e,n){return En((n||Date.now())+q(e))}function st(e){return Date.now()>=q(e)}function it(e,n){return`${e}${n?`:${n}`:""}`}function O(e=[],n=[]){return[...new Set([...e,...n])]}const xe="irn";function ct(e){return e?.relay||{protocol:xe}}function at(e){const n=gn[e];if(typeof n>"u")throw new Error(`Relay Protocol not supported: ${e}`);return n}var ut=Object.defineProperty,Fe=Object.getOwnPropertySymbols,dt=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,He=(e,n,t)=>n in e?ut(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,ft=(e,n)=>{for(var t in n||(n={}))dt.call(n,t)&&He(e,t,n[t]);if(Fe)for(var t of Fe(n))lt.call(n,t)&&He(e,t,n[t]);return e};function qe(e,n="-"){const t={},r="relay"+n;return Object.keys(e).forEach(o=>{if(o.startsWith(r)){const s=o.replace(r,""),c=e[o];t[s]=c}}),t}function pt(e){const n=e.indexOf(":"),t=e.indexOf("?")!==-1?e.indexOf("?"):void 0,r=e.substring(0,n),o=e.substring(n+1,t).split("@"),s=typeof t<"u"?e.substring(t):"",c=$.parse(s);return{protocol:r,topic:ze(o[0]),version:parseInt(o[1],10),symKey:c.symKey,relay:qe(c)}}function ze(e){return e.startsWith("//")?e.substring(2):e}function Be(e,n="-"){const t="relay",r={};return Object.keys(e).forEach(o=>{const s=t+n+o;e[o]&&(r[s]=e[o])}),r}function mt(e){return`${e.protocol}:${e.topic}@${e.version}?`+$.stringify(ft({symKey:e.symKey},Be(e.relay)))}var yt=Object.defineProperty,Et=Object.defineProperties,ht=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,vt=Object.prototype.hasOwnProperty,gt=Object.prototype.propertyIsEnumerable,We=(e,n,t)=>n in e?yt(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Nt=(e,n)=>{for(var t in n||(n={}))vt.call(n,t)&&We(e,t,n[t]);if(Ge)for(var t of Ge(n))gt.call(n,t)&&We(e,t,n[t]);return e},bt=(e,n)=>Et(e,ht(n));function T(e){const n=[];return e.forEach(t=>{const[r,o]=t.split(":");n.push(`${r}:${o}`)}),n}function Ye(e){const n=[];return Object.values(e).forEach(t=>{n.push(...T(t.accounts))}),n}function Je(e,n){const t=[];return Object.values(e).forEach(r=>{T(r.accounts).includes(n)&&t.push(...r.methods)}),t}function Qe(e,n){const t=[];return Object.values(e).forEach(r=>{T(r.accounts).includes(n)&&t.push(...r.events)}),t}function Ot(e,n){const t=sn(e,n);if(t)throw new Error(t.message);const r={};for(const[o,s]of Object.entries(e))r[o]={methods:s.methods,events:s.events,chains:s.accounts.map(c=>`${c.split(":")[0]}:${c.split(":")[1]}`)};return r}function St(e){const{proposal:{requiredNamespaces:n,optionalNamespaces:t={}},supportedNamespaces:r}=e,o=re(n),s=re(t),c={};Object.keys(r).forEach(i=>{const u=r[i].chains,a=r[i].methods,g=r[i].events,A=r[i].accounts;c[i]={chains:u,methods:a,events:g,accounts:A}});const d=an(n,c,"approve()");if(d)throw new Error(d.message);const l={};return Object.keys(o).forEach(i=>{const u=r[i].chains.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.chains)==null?void 0:y.includes(v)}),a=r[i].methods.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.methods)==null?void 0:y.includes(v)}),g=r[i].events.filter(v=>{var p,y;return(y=(p=o[i])==null?void 0:p.events)==null?void 0:y.includes(v)}),A=u.map(v=>r[i].accounts.filter(p=>p.includes(`${v}:`))).flat();l[i]={chains:u,methods:a,events:g,accounts:A}}),Object.keys(s).forEach(i=>{var u,a,g,A,v,p;if(!r[i])return;const y=(a=(u=s[i])==null?void 0:u.chains)==null?void 0:a.filter(I=>r[i].chains.includes(I)),dn=r[i].methods.filter(I=>{var P,w;return(w=(P=s[i])==null?void 0:P.methods)==null?void 0:w.includes(I)}),ln=r[i].events.filter(I=>{var P,w;return(w=(P=s[i])==null?void 0:P.events)==null?void 0:w.includes(I)}),fn=y?.map(I=>r[i].accounts.filter(P=>P.includes(I))).flat();l[i]={chains:O((g=l[i])==null?void 0:g.chains,y),methods:O((A=l[i])==null?void 0:A.methods,dn),events:O((v=l[i])==null?void 0:v.events,ln),accounts:O((p=l[i])==null?void 0:p.accounts,fn)}}),l}function te(e){return e.includes(":")}function Ze(e){return te(e)?e.split(":")[0]:e}function re(e){var n,t,r;const o={};if(!x(e))return o;for(const[s,c]of Object.entries(e)){const d=te(s)?[s]:c.chains,l=c.methods||[],i=c.events||[],u=Ze(s);o[u]=bt(Nt({},o[u]),{chains:O(d,(n=o[u])==null?void 0:n.chains),methods:O(l,(t=o[u])==null?void 0:t.methods),events:O(i,(r=o[u])==null?void 0:r.events)})}return o}const It={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Pt={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function N(e,n){const{message:t,code:r}=Pt[e];return{message:n?`${t} ${n}`:t,code:r}}function R(e,n){const{message:t,code:r}=It[e];return{message:n?`${t} ${n}`:t,code:r}}function C(e,n){return Array.isArray(e)?typeof n<"u"&&e.length?e.every(n):!0:!1}function x(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function S(e){return typeof e>"u"}function m(e,n){return n&&S(e)?!0:typeof e=="string"&&Boolean(e.trim().length)}function F(e,n){return n&&S(e)?!0:typeof e=="number"&&!isNaN(e)}function Tt(e,n){const{requiredNamespaces:t}=n,r=Object.keys(e.namespaces),o=Object.keys(t);let s=!0;return b(o,r)?(r.forEach(c=>{const{accounts:d,methods:l,events:i}=e.namespaces[c],u=T(d),a=t[c];(!b(V(c,a),u)||!b(a.methods,l)||!b(a.events,i))&&(s=!1)}),s):!1}function H(e){return m(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function Xe(e){if(m(e,!1)&&e.includes(":")){const n=e.split(":");if(n.length===3){const t=n[0]+":"+n[1];return!!n[2]&&H(t)}}return!1}function Rt(e){if(m(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function At(e){var n;return(n=e?.proposer)==null?void 0:n.publicKey}function Ut(e){return e?.topic}function _t(e,n){let t=null;return m(e?.publicKey,!1)||(t=N("MISSING_OR_INVALID",`${n} controller public key should be a string`)),t}function oe(e){let n=!0;return C(e)?e.length&&(n=e.every(t=>m(t,!1))):n=!1,n}function en(e,n,t){let r=null;return C(n)?n.forEach(o=>{r||(!H(o)||!o.includes(e))&&(r=R("UNSUPPORTED_CHAINS",`${t}, chain ${o} should be a string and conform to "namespace:chainId" format`))}):r=R("UNSUPPORTED_CHAINS",`${t}, chains ${n} should be an array of strings conforming to "namespace:chainId" format`),r}function nn(e,n){let t=null;return Object.entries(e).forEach(([r,o])=>{if(t)return;const s=en(r,V(r,o),`${n} requiredNamespace`);s&&(t=s)}),t}function tn(e,n){let t=null;return C(e)?e.forEach(r=>{t||Xe(r)||(t=R("UNSUPPORTED_ACCOUNTS",`${n}, account ${r} should be a string and conform to "namespace:chainId:address" format`))}):t=R("UNSUPPORTED_ACCOUNTS",`${n}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),t}function rn(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=tn(r?.accounts,`${n} namespace`);o&&(t=o)}),t}function on(e,n){let t=null;return oe(e?.methods)?oe(e?.events)||(t=R("UNSUPPORTED_EVENTS",`${n}, events should be an array of strings or empty array for no events`)):t=R("UNSUPPORTED_METHODS",`${n}, methods should be an array of strings or empty array for no methods`),t}function se(e,n){let t=null;return Object.values(e).forEach(r=>{if(t)return;const o=on(r,`${n}, namespace`);o&&(t=o)}),t}function wt(e,n,t){let r=null;if(e&&x(e)){const o=se(e,n);o&&(r=o);const s=nn(e,n);s&&(r=s)}else r=N("MISSING_OR_INVALID",`${n}, ${t} should be an object with data`);return r}function sn(e,n){let t=null;if(e&&x(e)){const r=se(e,n);r&&(t=r);const o=rn(e,n);o&&(t=o)}else t=N("MISSING_OR_INVALID",`${n}, namespaces should be an object with data`);return t}function cn(e){return m(e.protocol,!0)}function jt(e,n){let t=!1;return n&&!e?t=!0:e&&C(e)&&e.length&&e.forEach(r=>{t=cn(r)}),t}function Ct(e){return typeof e=="number"}function $t(e){return typeof e<"u"&&typeof e!==null}function Dt(e){return!(!e||typeof e!="object"||!e.code||!F(e.code,!1)||!e.message||!m(e.message,!1))}function Vt(e){return!(S(e)||!m(e.method,!1))}function Mt(e){return!(S(e)||S(e.result)&&S(e.error)||!F(e.id,!1)||!m(e.jsonrpc,!1))}function Kt(e){return!(S(e)||!m(e.name,!1))}function kt(e,n){return!(!H(n)||!Ye(e).includes(n))}function Lt(e,n,t){return m(t,!1)?Je(e,n).includes(t):!1}function xt(e,n,t){return m(t,!1)?Qe(e,n).includes(t):!1}function an(e,n,t){let r=null;const o=Ft(e),s=Ht(n),c=Object.keys(o),d=Object.keys(s),l=un(Object.keys(e)),i=un(Object.keys(n)),u=l.filter(a=>!i.includes(a));return u.length&&(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces keys don't satisfy requiredNamespaces.
      Required: ${u.toString()}
      Received: ${Object.keys(n).toString()}`)),b(c,d)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces chains don't satisfy required namespaces.
      Required: ${c.toString()}
      Approved: ${d.toString()}`)),Object.keys(n).forEach(a=>{if(!a.includes(":")||r)return;const g=T(n[a].accounts);g.includes(a)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces accounts don't satisfy namespace accounts for ${a}
        Required: ${a}
        Approved: ${g.toString()}`))}),c.forEach(a=>{r||(b(o[a].methods,s[a].methods)?b(o[a].events,s[a].events)||(r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces events don't satisfy namespace events for ${a}`)):r=N("NON_CONFORMING_NAMESPACES",`${t} namespaces methods don't satisfy namespace methods for ${a}`))}),r}function Ft(e){const n={};return Object.keys(e).forEach(t=>{var r;t.includes(":")?n[t]=e[t]:(r=e[t].chains)==null||r.forEach(o=>{n[o]={methods:e[t].methods,events:e[t].events}})}),n}function un(e){return[...new Set(e.map(n=>n.includes(":")?n.split(":")[0]:n))]}function Ht(e){const n={};return Object.keys(e).forEach(t=>{if(t.includes(":"))n[t]=e[t];else{const r=T(e[t].accounts);r?.forEach(o=>{n[o]={accounts:e[t].accounts.filter(s=>s.includes(`${o}:`)),methods:e[t].methods,events:e[t].events}})}}),n}function qt(e,n){return F(e,!1)&&e<=n.max&&e>=n.min}export{G as BASE10,f as BASE16,K as BASE64,Ln as COLON,Z as DEFAULT_DEPTH,L as EMPTY_SPACE,_ as ENV_MAP,xn as ONE_THOUSAND,Ue as REACT_NATIVE_PRODUCT,xe as RELAYER_DEFAULT_PROTOCOL,we as SDK_TYPE,_e as SLASH,W as TYPE_0,U as TYPE_1,k as UTF8,$e as appendToQueryString,Bn as assertType,St as buildApprovedNamespaces,ot as calcExpiry,Zn as capitalize,Le as capitalizeWord,Xn as createDelayedPromise,et as createExpiringPromise,j as decodeTypeByte,$n as decrypt,_n as deriveSymKey,Q as deserialize,Se as encodeTypeByte,Cn as encrypt,it as engineEvent,Qn as enumify,Ee as formatAccountId,Nn as formatAccountWithChain,ye as formatChainId,ne as formatExpirerTarget,tt as formatIdTarget,Tn as formatMessage,Gn as formatMessageContext,Be as formatRelayParams,qn as formatRelayRpcUrl,nt as formatTopicTarget,Me as formatUA,mt as formatUri,An as generateKeyPair,Un as generateRandomBytes32,T as getAccountsChains,On as getAccountsFromNamespaces,he as getAddressFromAccount,bn as getAddressesFromAccounts,Fn as getAppMetadata,ve as getChainFromAccount,ge as getChainsFromAccounts,V as getChainsFromNamespace,Sn as getChainsFromNamespaces,In as getChainsFromRequiredNamespaces,be as getDidAddress,M as getDidAddressSegments,Ne as getDidChainId,ee as getEnvironment,zn as getHttpUrl,N as getInternalError,Ve as getJavascriptID,De as getJavascriptOS,ke as getLastItems,Pn as getNamespacedDidChainId,Ye as getNamespacesChains,Qe as getNamespacesEventsForChainId,Je as getNamespacesMethodsForChainId,Hn as getRelayClientMetadata,at as getRelayProtocolApi,ct as getRelayProtocolName,Ot as getRequiredNamespacesFromNamespaces,R as getSdkError,B as getUniqueValues,b as hasOverlap,wn as hashKey,jn as hashMessage,Ce as isBrowser,te as isCaipNamespace,an as isConformingNamespaces,st as isExpired,X as isNode,At as isProposalStruct,je as isReactNative,Tt as isSessionCompatible,Ut as isSessionStruct,Vn as isTypeOneEnvelope,S as isUndefined,Xe as isValidAccountId,tn as isValidAccounts,on as isValidActions,C as isValidArray,H as isValidChainId,en as isValidChains,_t as isValidController,Dt as isValidErrorReason,Kt as isValidEvent,Ct as isValidId,rn as isValidNamespaceAccounts,se as isValidNamespaceActions,nn as isValidNamespaceChains,oe as isValidNamespaceMethodsOrEvents,sn as isValidNamespaces,kt as isValidNamespacesChainId,xt as isValidNamespacesEvent,Lt as isValidNamespacesRequest,F as isValidNumber,x as isValidObject,$t as isValidParams,cn as isValidRelay,jt as isValidRelays,Vt as isValidRequest,qt as isValidRequestExpiry,wt as isValidRequiredNamespaces,Mt as isValidResponse,m as isValidString,Rt as isValidUrl,Jn as mapEntries,Wn as mapToObj,O as mergeArrays,re as normalizeNamespaces,Yn as objToMap,z as parseAccountId,me as parseChainId,Ke as parseContextNames,rt as parseExpirerTarget,Ze as parseNamespaceKey,qe as parseRelayParams,ze as parseTopic,pt as parseUri,Ie as serialize,Dn as validateDecoding,Pe as validateEncoding};
//# sourceMappingURL=index.es.js.map
