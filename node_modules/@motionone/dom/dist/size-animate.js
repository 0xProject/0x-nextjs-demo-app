const t=(t,e,n)=>Math.min(Math.max(n,t),e),e={duration:.3,delay:0,endDelay:0,repeat:0,easing:"ease"},n=t=>"number"==typeof t,i=t=>Array.isArray(t)&&!n(t[0]);const a=(t,e,n)=>-n*t+n*e+t,s=()=>{},r=t=>t,o=(t,e,n)=>e-t==0?1:(n-t)/(e-t);function l(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const s=o(0,e,i);t.push(a(n,1,s))}}function c(e,n=function(t){const e=[0];return l(e,t-1),e}(e.length),s=r){const c=e.length,u=c-n.length;return u>0&&l(n,u),r=>{let l=0;for(;l<c-2&&!(r<n[l+1]);l++);let u=t(0,1,o(n[l],n[l+1],r));const h=function(t,e){return i(t)?t[((t,e,n)=>{const i=e-t;return((n-t)%i+i)%i+t})(0,t.length,e)]:t}(s,l);return u=h(u),a(e[l],e[l+1],u)}}const u=t=>Array.isArray(t)&&n(t[0]),h=t=>"object"==typeof t&&Boolean(t.createAnimation),d=t=>"function"==typeof t,f=t=>1e3*t,m=t=>t/1e3,p=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t;function y(t,e,n,i){if(t===e&&n===i)return r;const a=e=>function(t,e,n,i,a){let s,r,o=0;do{r=e+(n-e)/2,s=p(r,i,a)-t,s>0?n=r:e=r}while(Math.abs(s)>1e-7&&++o<12);return r}(e,0,1,t,n);return t=>0===t||1===t?t:p(a(t),e,i)}const g={ease:y(.25,.1,.25,1),"ease-in":y(.42,0,1,1),"ease-in-out":y(.42,0,.58,1),"ease-out":y(0,0,.58,1)},v=/\((.*?)\)/;function T(e){if(d(e))return e;if(u(e))return y(...e);if(g[e])return g[e];if(e.startsWith("steps")){const n=v.exec(e);if(n){const e=n[1].split(",");return((e,n="end")=>i=>{const a=(i="end"===n?Math.min(i,.999):Math.max(i,.001))*e,s="end"===n?Math.floor(a):Math.ceil(a);return t(0,1,s/e)})(parseFloat(e[0]),e[1].trim())}}return r}var w=function(){};"production"!==process.env.NODE_ENV&&(w=function(t,e){if(!t)throw new Error(e)});class S{setAnimation(t){this.animation=t,null==t||t.finished.then((()=>this.clearAnimation())).catch((()=>{}))}clearAnimation(){this.animation=this.generator=void 0}}const D=new WeakMap;function b(t){return D.has(t)||D.set(t,{transforms:[],values:new Map}),D.get(t)}const A=["","X","Y","Z"],x={x:"translateX",y:"translateY",z:"translateZ"},O={syntax:"<angle>",initialValue:"0deg",toDefaultUnit:t=>t+"deg"},k={translate:{syntax:"<length-percentage>",initialValue:"0px",toDefaultUnit:t=>t+"px"},rotate:O,scale:{syntax:"<number>",initialValue:1,toDefaultUnit:r},skew:O},E=new Map,M=t=>`--motion-${t}`,R=["x","y","z"];["translate","scale","rotate","skew"].forEach((t=>{A.forEach((e=>{R.push(t+e),E.set(M(t+e),k[t])}))}));const P=(t,e)=>R.indexOf(t)-R.indexOf(e),j=new Set(R),V=t=>j.has(t),$=t=>t.sort(P).reduce(q,"").trim(),q=(t,e)=>`${t} ${e}(var(${M(e)}))`,F=t=>t.startsWith("--"),N=new Set;const U=(t,e)=>document.createElement("div").animate(t,e),_={cssRegisterProperty:()=>"undefined"!=typeof CSS&&Object.hasOwnProperty.call(CSS,"registerProperty"),waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate"),partialKeyframes:()=>{try{U({opacity:[1]})}catch(t){return!1}return!0},finished:()=>Boolean(U({opacity:[0,1]},{duration:.001}).finished),linearEasing:()=>{try{U({opacity:0},{easing:"linear(0, 1)"})}catch(t){return!1}return!0}},B={},C={};for(const t in _)C[t]=()=>(void 0===B[t]&&(B[t]=_[t]()),B[t]);const I=(t,n)=>d(t)?C.linearEasing()?`linear(${((t,e)=>{let n="";const i=Math.round(e/.015);for(let e=0;e<i;e++)n+=t(o(0,i-1,e))+", ";return n.substring(0,n.length-2)})(t,n)})`:e.easing:u(t)?z(t):t,z=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`;function W(t){return x[t]&&(t=x[t]),V(t)?M(t):t}const K=(t,e)=>{e=W(e);let n=F(e)?t.style.getPropertyValue(e):getComputedStyle(t)[e];if(!n&&0!==n){const t=E.get(e);t&&(n=t.initialValue)}return n},X=(t,e,n)=>{e=W(e),F(e)?t.style.setProperty(e,n):t.style[e]=n};function Y(t,e=!0){if(t&&"finished"!==t.playState)try{t.stop?t.stop():(e&&t.commitStyles(),t.cancel())}catch(t){}}function Z(t,a,o,l={},c){const u=window.__MOTION_DEV_TOOLS_RECORD,m=!1!==l.record&&u;let p,{duration:y=e.duration,delay:g=e.delay,endDelay:v=e.endDelay,repeat:T=e.repeat,easing:w=e.easing,persist:D=!1,direction:A,offset:O,allowWebkitAcceleration:k=!1}=l;const M=b(t),R=V(a);let P=C.waapi();R&&((t,e)=>{x[e]&&(e=x[e]);const{transforms:n}=b(t);var i,a;a=e,-1===(i=n).indexOf(a)&&i.push(a),t.style.transform=$(n)})(t,a);const j=W(a),q=function(t,e){return t.has(e)||t.set(e,new S),t.get(e)}(M.values,j),U=E.get(j);return Y(q.animation,!(h(w)&&q.generator)&&!1!==l.record),()=>{const e=()=>{var e,n;return null!==(n=null!==(e=K(t,j))&&void 0!==e?e:null==U?void 0:U.initialValue)&&void 0!==n?n:0};let S=function(t,e){for(let n=0;n<t.length;n++)null===t[n]&&(t[n]=n?t[n-1]:e());return t}((t=>Array.isArray(t)?t:[t])(o),e);const b=function(t,e){var n;let i=(null==e?void 0:e.toDefaultUnit)||r;const a=t[t.length-1];if("string"==typeof a){const t=(null===(n=a.match(/(-?[\d.]+)([a-z%]*)/))||void 0===n?void 0:n[2])||"";t&&(i=e=>e+t)}return i}(S,U);if(h(w)){const t=w.createAnimation(S,"opacity"!==a,e,j,q);w=t.easing,S=t.keyframes||S,y=t.duration||y}if(F(j)&&(C.cssRegisterProperty()?function(t){if(!N.has(t)){N.add(t);try{const{syntax:e,initialValue:n}=E.has(t)?E.get(t):{};CSS.registerProperty({name:t,inherits:!1,syntax:e,initialValue:n})}catch(t){}}}(j):P=!1),R&&!C.linearEasing()&&(d(w)||i(w)&&w.some(d))&&(P=!1),P){U&&(S=S.map((t=>n(t)?U.toDefaultUnit(t):t))),1!==S.length||C.partialKeyframes()&&!m||S.unshift(e());const a={delay:f(g),duration:f(y),endDelay:f(v),easing:i(w)?void 0:I(w,y),direction:A,iterations:T+1,fill:"both"};p=t.animate({[j]:S,offset:O,easing:i(w)?w.map((t=>I(t,y))):void 0},a),p.finished||(p.finished=new Promise(((t,e)=>{p.onfinish=t,p.oncancel=e})));const r=S[S.length-1];p.finished.then((()=>{D||(X(t,j,r),p.cancel())})).catch(s),k||(p.playbackRate=1.000001)}else if(c&&R)S=S.map((t=>"string"==typeof t?parseFloat(t):t)),1===S.length&&S.unshift(parseFloat(e())),p=new c((e=>{X(t,j,b?b(e):e)}),S,Object.assign(Object.assign({},l),{duration:y,easing:w}));else{const e=S[S.length-1];X(t,j,U&&n(e)?U.toDefaultUnit(e):e)}return m&&u(t,a,S,{duration:y,delay:g,easing:w,repeat:T,offset:O},"motion-one"),q.setAnimation(p),p}}const L=(t,e)=>t[e]?Object.assign(Object.assign({},t),t[e]):Object.assign({},t);const G=t=>t(),H={get:(t,e)=>{const n=t.animations[0];switch(e){case"duration":return t.duration;case"currentTime":return m((null==n?void 0:n[e])||0);case"playbackRate":case"playState":return null==n?void 0:n[e];case"finished":return t.finished||(t.finished=Promise.all(t.animations.map(J)).catch(s)),t.finished;case"stop":return()=>{t.animations.forEach((t=>Y(t)))};case"forEachNative":return e=>{t.animations.forEach((n=>e(n,t)))};default:return void 0===(null==n?void 0:n[e])?void 0:()=>t.animations.forEach((t=>t[e]()))}},set:(t,e,n)=>{switch(e){case"currentTime":n=f(n);case"currentTime":case"playbackRate":for(let i=0;i<t.animations.length;i++)t.animations[i][e]=n;return!0}return!1}},J=t=>t.finished;function Q(t,e,n){return d(t)?t(e,n):t}const tt=(et=class{constructor(t,n=[0,1],{easing:a,duration:s=e.duration,delay:o=e.delay,endDelay:l=e.endDelay,repeat:u=e.repeat,offset:d,direction:f="normal"}={}){if(this.startTime=null,this.rate=1,this.t=0,this.cancelTimestamp=null,this.easing=r,this.duration=0,this.totalDuration=0,this.repeat=0,this.playState="idle",this.finished=new Promise(((t,e)=>{this.resolve=t,this.reject=e})),a=a||e.easing,h(a)){const t=a.createAnimation(n);a=t.easing,n=t.keyframes||n,s=t.duration||s}this.repeat=u,this.easing=i(a)?r:T(a),this.updateDuration(s);const m=c(n,d,i(a)?a.map(T):r);this.tick=e=>{var n;let i=0;i=void 0!==this.pauseTime?this.pauseTime:(e-this.startTime)*this.rate,this.t=i,i/=1e3,i=Math.max(i-o,0),"finished"===this.playState&&void 0===this.pauseTime&&(i=this.totalDuration);const a=i/this.duration;let s=Math.floor(a),r=a%1;!r&&a>=1&&(r=1),1===r&&s--;const c=s%2;("reverse"===f||"alternate"===f&&c||"alternate-reverse"===f&&!c)&&(r=1-r);const u=i>=this.totalDuration?1:Math.min(r,1),h=m(this.easing(u));t(h),void 0===this.pauseTime&&("finished"===this.playState||i>=this.totalDuration+l)?(this.playState="finished",null===(n=this.resolve)||void 0===n||n.call(this,h)):"idle"!==this.playState&&(this.frameRequestId=requestAnimationFrame(this.tick))},this.play()}play(){const t=performance.now();this.playState="running",void 0!==this.pauseTime?this.startTime=t-this.pauseTime:this.startTime||(this.startTime=t),this.cancelTimestamp=this.startTime,this.pauseTime=void 0,this.frameRequestId=requestAnimationFrame(this.tick)}pause(){this.playState="paused",this.pauseTime=this.t}finish(){this.playState="finished",this.tick(0)}stop(){var t;this.playState="idle",void 0!==this.frameRequestId&&cancelAnimationFrame(this.frameRequestId),null===(t=this.reject)||void 0===t||t.call(this,!1)}cancel(){this.stop(),this.tick(this.cancelTimestamp)}reverse(){this.rate*=-1}commitStyles(){}updateDuration(t){this.duration=t,this.totalDuration=t*(this.repeat+1)}get currentTime(){return this.t}set currentTime(t){void 0!==this.pauseTime||0===this.rate?this.pauseTime=t:this.startTime=performance.now()-t/this.rate}get playbackRate(){return this.rate}set playbackRate(t){this.rate=t}},function(t,n,i={}){const a=(t=function(t,e){var n;return"string"==typeof t?e?(null!==(n=e[t])&&void 0!==n||(e[t]=document.querySelectorAll(t)),t=e[t]):t=document.querySelectorAll(t):t instanceof Element&&(t=[t]),Array.from(t||[])}(t)).length;w(Boolean(a),"No valid element provided."),w(Boolean(n),"No keyframes defined.");const s=[];for(let e=0;e<a;e++){const r=t[e];for(const t in n){const o=L(i,t);o.delay=Q(o.delay,e,a);const l=Z(r,t,n[t],o,et);s.push(l)}}return((t,n,i=e.duration)=>new Proxy({animations:t.map(G).filter(Boolean),duration:i,options:n},H))(s,i,i.duration)});var et;export{tt as animate};
